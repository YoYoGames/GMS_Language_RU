<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Глобальные переменные</title>
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <link rel="stylesheet" href="../../../assets/css/default.css" type="text/css" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page explaining global variables" />
  <meta name="rh-index-keywords" content="global,globalvar,Global Variables" />
  <meta name="search-keywords" content="global,global variables,globalvar" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>Глобальные переменные</h1>
  <p>Основное описание <strong>глобальной </strong>переменной - это переменная, которая, будучи объявленной, не принадлежит ни одному конкретному экземпляру, но доступна всем. Как и <a href="Local_Variables.htm">локальные переменные</a>, глобальные переменные должны быть объявлены
    используя идентификатор, но в отличие от локальной переменной, глобальная переменная остается в памяти <em>до конца игры</em>. Таким образом, вы можете создать глобальную переменную для отслеживания (например) количества патронов у игрока, а затем просто обновлять ее.
    эту переменную в разные моменты игры, формируя любой экземпляр или функцию и в любое время. По сути, глобальная переменная не принадлежит ни одному конкретному экземпляру и может быть доступна, изменена и использована всеми экземплярами, а любые изменения, внесенные в переменную
    переменной, являются &quot;глобальными&quot;, так как все экземпляры, использующие переменную, будут затронуты этим изменением. Давайте рассмотрим пример:</p>
  <p class="code">global.food = 5;</p>
  <p>Мы объявляем переменную &quot;<span class="inline">food</span>&quot;, написав сначала &quot;<span class="inline">global</span>&quot;, а затем &quot;<span class="inline">.</span>&quot;, чтобы сообщить GameMaker Studio 2, что эта <span class="notranslate">переменная теперь</span> имеет глобальную область применения.
    С этого момента мы должны будем использовать эту форму каждый раз, когда нам потребуется получить доступ к этой переменной или изменить ее каким-либо образом. Итак, мы создали новую переменную под названием &quot;<span class="inline">food</span>&quot; и объявили ее глобальной. Теперь любой
    экземпляр или функция может использовать и изменять эту переменную любым способом, и все остальные экземпляры будут &quot;видеть&quot; это. Например, у нас может быть другой объект еды, с которым сталкивается игрок, и в событии столкновения мы имеем:</p>
  <p class="code">global.food +=1;</p>
  <p>У нас также есть другой объект, который рисует это значение следующим образом:</p>
  <p class="code">draw_text(32, 32, &quot;еда = &quot; + string(global.food));</p>
  <p>С помощью глобальных переменных мы можем изменять значения и видеть, как эти изменения отражаются во всех экземплярах объектов, которые ссылаются на эту переменную. Как и в случае с <i>локальными</i> переменными, вы должны следить за тем, чтобы ваши глобальные переменные не назывались так же, как и все экземпляры.
    так как это может вызвать проблемы и привести к появлению ошибок в ваших играх из-за дублирования переменных, что иногда бывает трудно отладить. В общем, у вас должен быть один объект, в котором объявляются все ваши глобальные переменные в самом
    (например, в <a href="../../../The_Asset_Editors/Object_Properties/Other_Events.htm">событии Room Start Event</a> первого экземпляра объекта, помещенного в первую комнату игры) или в одной <a href="../Script_Functions.htm">функции скрипта</a>, которая объявляет их все вместе, так как это дает вам удобное место для возвращения и ссылки на все сразу, если вам нужно проверить имя переменной или изменить значение.</p>
  <p>В<span class="notranslate">GameMaker Studio 2</span> есть коллекция &quot;встроенных&quot; глобальных переменных, поэтому вы должны знать о них, поскольку вы можете назвать одну из своих переменных экземпляра таким же именем или захотеть иметь свою собственную глобальную переменную с таким же именем и удивляться, почему вы
    получаете ошибки! Однако их легко обнаружить, поскольку в редакторе кода они отображаются другим цветом, а также появляются в строке автозаполнения внизу. Большинство встроенных глобальных переменных очень специфичны и используются только в редких случаях.
    но есть одна важная переменная, которая используется часто и не указана в других разделах руководства:</p>
  <ul class="colour">
    <li><a href="Builtin_Global_Variables/async_load.htm"><tt>async_load</tt></a></li>
  </ul>
  <p>Есть также три <b>устаревшие</b> встроенные глобальные переменные, о которых вам следует знать (эти переменные предназначены только для поддержки старых проектов предыдущих версий <span class="notranslate">GameMaker</span>, и их следует <b><i>не использовать в новых проектах</i></b>):</p>
  <ul class="colour">
    <li><a href="Builtin_Global_Variables/score.htm"><tt>счет</tt></a></li>
    <li><a href="Builtin_Global_Variables/health.htm"><tt>здоровье</tt></a></li>
    <li><a href="Builtin_Global_Variables/lives.htm"><tt>жизни</tt></a></li>
  </ul>
  <p>Наконец, есть две переменные, которые можно использовать для функций и методов сценария:</p>
  <ul class="colour">
    <li><a href="Builtin_Global_Variables/argument.htm">аргумент</a></li>
    <li><a href="Builtin_Global_Variables/argument_count.htm">счётчик аргументов</a></li>
  </ul>
  <p>Следующая форма также может быть использована для объявления глобальных переменных, но она является <i><b>включено только для обратной совместимости</b></i>и не рекомендуется использовать эту форму в новых проектах, поскольку будущие версии <span class="notranslate">GameMaker</span> могут ее не поддерживать.</p>
  <p>Вторая форма создания глобальных переменных - это объявление их как таковых с помощью объявления <tt>globalvar</tt>, точно так же, как вы объявляете локальную переменную с помощью объявления <tt>var</tt>.</p>
  <p class="note"><b>ВАЖНО!</b> Объявление <tt>globalvar</tt> <b>устарело</b> и поддерживается только для старых целей. Вы <b>всегда</b> должны использовать идентификатор <tt>global.</tt> для обозначения глобальных переменных.</p>
  <p>Это (устаревшее) объявление будет использоваться следующим образом:</p>
  <p class="code">globalvar food;<br> food = 5;</p>
  <p>После объявления таким образом переменная &quot;food&quot; теперь считается глобальной и не требует <tt>префикса</tt> global. <tt>-</tt> что также означает, что гораздо сложнее идентифицировать глобальные переменные в вашем коде, а также гораздо проще получить перекрытие переменных, когда вы используете одно и то же имя переменной в разных объектах.
    при использовании одного и того же имени переменной в различных объектах или установленных расширениях. После объявления глобальной переменной доступ к ней осуществляется следующим образом:</p>
  <p class="code">еда += 2;</p>
  <p>или:</p>
  <p class="code">draw_text(32, 32, &quot;food = &quot; + string(food));</p>
  <p>Как видите, не имея ничего, что могло бы показать, что переменная является глобальной в области видимости, вы потенциально создаете себе множество тонких проблем, которые могут возникнуть в вашей игре, поэтому такого объявления следует избегать.</p>
  <p>Существует несколько функций, призванных помочь вам при работе с глобальными переменными, которые вы можете найти на следующей странице:</p>
  <ul class="colour">
    <li><a href="../../GML_Reference/Variable_Functions/Variable_Functions.htm">Переменные функции</a></li>
  </ul>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Назад: <a href="../Variables_And_Variable_Scope.htm">Переменные и область применения переменных</a></div>
        <div style="float:right">Следующее: <a href="Constants.htm">Константы</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2021 Все права защищены</span></h5>
  </div>
  <!-- KEYWORDS
global
globalvar
global variables
-->
  <!-- TAGS
global_variables
-->
</body>
</html>