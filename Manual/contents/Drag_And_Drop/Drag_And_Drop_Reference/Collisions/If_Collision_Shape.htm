<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Если форма столкновения</title>
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <link rel="stylesheet" href="../../../assets/css/default.css" type="text/css" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page that explains the If Collision Shape action" />
  <meta name="rh-index-keywords" content="DnD™ Action - If Collision Shape" />
  <meta name="search-keywords" content="If Collision Shape" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1><img alt="If Collision Shape Icon" class="icon" height="32" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/i_Collision_Shape.png" width="32"> Если форма столкновения</h1>
  <p>Это действие используется для проверки наличия столкновения с экземпляром заданного объекта в области заданной формы или вдоль линии. Вы указываете форму (прямоугольник, эллипс или линия), объект для проверки, а затем задаете координаты для
    верхнего левого и нижнего правого углов используемой фигуры, или, в случае линии, начального и конечного положения. Это могут быть абсолютные позиции в пределах игровой комнаты или позиции относительно экземпляра, выполняющего действие. Вы можете увидеть, как
    это работает на изображении ниже:</p>
  <p><img alt="Example of different collision shapes" class="center" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/collision_shape_example.png">Как вы можете видеть, результаты будут зависеть от маски столкновений экземпляра.
    то есть у искомого объекта <i>должен</i> быть спрайт, назначенный на <tt>sprite_index</tt>, или спрайт, назначенный на <tt>mask_index</tt>. Если это не так, то он не будет обнаружен этими функциями,
    независимо от того, рисует ли он спрайт или нет. Стоит отметить, что любой объект, который полностью попадает в границы, установленные для формы эллипса или прямоугольника, также вернет столкновение. Действие будет иметь значение <tt>true</tt>, если
    столкновение обнаружено, или <tt>false</tt> в противном случае, хотя вы также можете проверить флаг <b>Not</b>, чтобы проверить, <i>нет</i> ли столкновения с данной областью фигуры, и тогда действие будет оцениваться как <tt>true</tt>, только если столкновений <i>не</i> обнаружено.
    в противном случае оно будет иметь значение <tt>false</tt>. Вы также можете установить параметр <b>Exclude Self</b>, чтобы исключить вызывающий экземпляр из проверки столкновений.</p>
  <p>Далее вы можете отметить/отметить опцию <b>Возвращать список</b>. Установка флажка означает, что действие создаст и заполнит <a href="../Data_Structures/Data_Structure_Actions.htm">список</a><span> </span>структурой данных со <i>всеми экземплярами</i>в столкновении
    с фигурой и установит переменную <b>Target</b> в идентификатор списка DS. Если флажок не установлен, то переменная <b>Target</b> будет установлена в значение меньше 0 только в том случае, если столкновение не обнаружено, или в уникальное значение ID <i>одного</i> из экземпляров, попавших в столкновение.
    (обратите внимание, что если в столкновении участвуют несколько экземпляров, то у вас нет возможности узнать, какой ID экземпляра будет возвращен, если не используется список).</p>
  <p>Если вы выбрали возврат списка - и переменная Target <i>не</i> установлена в <b>Temp</b> - то вы также можете выбрать опцию <b>Free Target</b>. Если установить значение <tt>true</tt>, то список, содержащийся в переменной target, будет уничтожен и
    новый список будет создан (и возвращен в переменную target) каждый раз, когда вы вызываете действие. Таким образом, вы можете повторно использовать одну и ту же переменную, не беспокоясь об утечке памяти, так как, если вы <i>не</i> отметите опцию <b>Free Target</b>, вы становитесь ответственным за
    за уничтожение списка перед повторным использованием переменной в действии. Обратите внимание, что <i>независимо от</i> того, отмечена эта опция или нет, если вы установили действие на <b>Return List</b>, то переменная target <i>всегда будет содержать идентификатор списка</i>,
    и как таковая, она должна быть освобождена при уничтожении экземпляра или завершении комнаты (вы можете использовать событие <a href="../../../The_Asset_Editors/Object_Properties/Object_Events.htm"><b>Очистка</b></a> событие, например, вместе с действием <a href="../Data_Structures/Free_Data_Structure.htm">Free Data Structure</a><span> </span>).
    Стоит отметить, что вы можете установить опцию <b>Free Target</b> на использование предопределенной переменной или выражения и таким образом контролировать момент освобождения структуры данных списка, устанавливая переменную в другом месте (или используя различные результаты для выражения)
    до тех пор, пока оно будет иметь значение <tt>true/false</tt>.</p>
  <p>Наконец, вы указываете переменную <b>Target</b>, которая будет содержать возвращаемое значение или ID списка. Если вы отметите переменную Target для хранения возвращаемого значения как <b>Temp</b> (локальную) переменную, то действие создаст эту переменную для хранения возвращаемого значения только до конца события.
    В этом случае опция Free Target ничего не делает, и вы будете ответственны за уничтожение списка DS, если эта опция была отмечена. Если переменная цели не задана, а опция <b>Return List</b> отмечена, список не будет создан.</p>
  <p class="note"><b>ВАЖНО!</b> Столкновения будут регистрироваться только для тех экземпляров, у которых есть действительная маска столкновения, т.е. у них есть спрайт, назначенный на <tt>sprite_index</tt>, или спрайт, назначенный на <tt>mask_index</tt>. Если экземпляры объекта, который
    не имеют маски столкновения, то столкновение не будет обнаружено, независимо от того, что рисует экземпляр в данный момент.</p>
  <p>Обратите внимание, что для добавления действий в блок &quot;<span class="inline">if</span>&quot;, их следует опустить сбоку от <i>действия</i>, как показано на изображении ниже:</p>
  <p><img alt="If Collision Shape drop actions" class="center" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/If_Collision_Shape.png" /></p>
  <p> </p>
  <h4>Синтаксис действия:</h4>
  <p><img alt="If Collision Shape Action" class="center" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/a_Collision_Shape.png" /></p>
  <h4>Аргументы:</h4>
  <table>
    <tbody>
      <tr>
        <th>Аргумент</th>
        <th>Описание</th>
      </tr>
      <tr>
        <td>Форма</td>
        <td>Форма для использования</td>
      </tr>
      <tr>
        <td>Объект</td>
        <td>Объект для проверки на наличие экземпляров</td>
      </tr>
      <tr>
        <td>x1</td>
        <td>Позиция x, с которой нужно начинать</td>
      </tr>
      <tr>
        <td>y1</td>
        <td>Позиция y, с которой нужно начинать</td>
      </tr>
      <tr>
        <td>x2</td>
        <td>Позиция x, на которой нужно закончить</td>
      </tr>
      <tr>
        <td>y2</td>
        <td>Позиция y, на которой нужно закончить</td>
      </tr>
      <tr>
        <td>Свободная цель</td>
        <td>Может быть установлен на переменную или выражение, или установлен на <tt>true/false</tt> для управления освобождением памяти списка при повторном использовании переменной списка</td>
      </tr>
      <tr>
        <td>Цель</td>
        <td>Переменная, на которую будет нацелено возвращаемое значение действия</td>
      </tr>
    </tbody>
  </table>
  <p> </p>
  <h4>Пример:</h4>
  <p><img alt="If Collision Shape Example" class="center" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/e_Collision_Shape.png">Приведенный выше код блока действий проверяет столкновение с любыми экземплярами объекта &quot;
    <span class="inline">obj_Enemy</span> &quot; в радиусе 100px вокруг позиции вызывающего экземпляра. Действие формирует список всех экземпляров, с которыми обнаружено столкновение, и сохраняет идентификатор списка в переменной Target. Если действие имеет значение
   <tt>true</tt>, то список просматривается, и у каждого экземпляра с его ID, сохраненным в списке, переменная &quot;<span class="inline">hp</span>&quot; уменьшается на 1. Затем список DS освобождается.</p>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Назад: <a href="Collision_Actions.htm">Действия при столкновении</a></div>
        <div style="float:right">Следующий: <a href="If_Collision_Point.htm">Если точка столкновения</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2021 Все права защищены</span></h5>
  </div>
  <!-- KEYWORDS
Action - If Collision Shape
-->
  <!-- TAGS
action_if_collision_shape
-->
</body>
</html>