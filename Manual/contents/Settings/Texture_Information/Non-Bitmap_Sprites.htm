<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <title>Небитовые спрайты</title>
  <meta name="topic-status" content="Draft" />
  <link rel="stylesheet" type="text/css" href="../../assets/css/default.css" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Section explaining non-bitmap sprites in GameMaker" />
  <meta name="search-keywords" content="SWF,Spine,skeleton animation,vector sprites" />
  <meta name="rh-index-keywords" content="Texture Goups - Non-Bitmap Sprites,SWF,Spine" />
</head>
<body>
  <h1>Небитовые спрайты</h1>
  <p>В<span class="notranslate">GameMaker Studio 2</span> есть поддержка небитовых спрайтов в виде <a class="glossterm" data-glossterm="вектор" href="#">векторных</a> файлов <span class="inline">SWF </span>или файлов <strong>Spine Skeletal Animation</strong>. Оба эти формата имеют свои плюсы и минусы, и в двух следующих разделах рассказывается о том, как импортировать их в <a href="../../The_Asset_Editors/Sprites.htm">редактор спрайтов</a>, а также немного информации о том, как они рисуются.</p>
  <p> </p>
  <h2>Скелетная анимация спрайтов (позвоночник)</h2>
  <p>Спрайт, созданный с использованием скелетной анимации, - это спрайт, в котором создан базовый &quot;скелет&quot; и анимирован с помощью ключевых кадров для перемещения составных частей скелета во времени. Затем на этот скелет накладывается текстура из <a class="glossterm" data-glossterm="атлас текстур" href="#">атласа текстур</a>, и полученная анимация экспортируется в один из многих типов файлов. <span class="notranslate">GameMaker</span> Studio 2 позволяет импортировать этот тип спрайта при условии, что он был экспортирован в файл формата <span class="inline">*.json</span> и имеет соответствующий файл атласа текстур ( ).
    корректно связанный файл атласа текстур (<span class="inline">*.atlas</span>) и файл изображения (в формате <span class="inline">*.png</span>) <em>в том же каталоге</em>.</p>
  <p><img alt="Spine UI" class="center" src="../../assets/Images/Settings/Spine_Example.png">В настоящее время <span class="notranslate">GameMaker Studio 2</span> может <strong>импортировать векторные изображения только из файлов формата JSON, созданных программой <a href="http://esotericsoftware.com/">Spine</a></strong>,
    однако способ их импорта в программу практически идентичен способу добавления обычного растрового изображения. Чтобы добавить скелетную анимацию, необходимо создать новый спрайт, что вызовет стандартный диалог <strong>Load Sprite</strong>, только
    только здесь нужно убедиться, что вы выбрали <span class="inline">*.json</span> в фильтре файлов внизу:</p>
  <p><img alt="Import Spine Sprite" class="center" src="../../assets/Images/Settings/Spine_Import.png" /></p>
  <p>Нажатие кнопки &quot;Загрузить&quot; добавит скелетную анимацию в Браузер активов в <a href="../../Introduction/The_Asset_Browser.htm">виде спрайта</a>, при этом по мере обработки файла будет отображаться индикатор выполнения. Обратите внимание, что в зависимости от сложности
    файла, это может занять минуту или две. По окончании обработки вы вернетесь к диалогу свойств спрайта, который теперь будет выглядеть следующим образом:</p>
  <p><img alt="Spine SPrite In The Sprite Editor" class="center" src="../../assets/Images/Settings/Spine_OptionsDisabled.png">После импорта анимации вы можете задать свойства столкновений, но учтите, что здесь вы ограничены только использованием
    точными столкновениями или столкновениями с ограничивающей рамкой, и что данные о столкновениях для скелетной анимации явно берутся из предоставленных данных. <span class="notranslate">GameMaker Studio 2</span> не генерирует маску столкновений, если данные отсутствуют в импортированном файле, а это означает, что
    вы просто не получите работающих коллизий, если маски не установлены правильно в программе, используемой для создания импортируемого изображения.</p>
  <p class="note"><strong>ПРИМЕЧАНИЕ</strong>: Из-за сложности скелетной анимации, изображение предварительного просмотра, показанное в редакторе спрайтов, не предназначено для точного представления вашей анимации, а скорее дает вам простое изображение, которое представляет анимацию для визуализации
    в редакторе комнат.</p>
  <p>В отличие от растровых спрайтов, импортированный спрайт скелетной анимации <strong>не может быть изменен в редакторе</strong> каким-либо образом, но существует ряд функций, доступных в <span class="notranslate">языке GameMaker Language</span><span class="notranslate">(GML</span>), которые можно использовать для изменения скинов, установки свойств,
    и управлять другими аспектами анимации. Вы также не можете установить какие-либо параметры текстуры для спрайта, поскольку <span class="notranslate">GameMaker</span> будет использовать прилагаемый атлас текстур, созданный программой, которая сгенерировала спрайт.</p>
  <p>Существует ряд моментов, о которых вы должны знать при импорте спрайтов скелетной анимации, самым важным из которых является то, что некоторые функции рисования и управления спрайтами не поддерживаются по техническим причинам, в частности те, которые
    функции рисования, которые рисуют только часть спрайта или каким-либо образом &quot;перекашивают&quot; позицию (см. отдельные <a href="../../GameMaker_Language/GML_Reference/Drawing/Sprites_And_Tiles/Sprites_And_Tiles.htm"><span class="inline">draw_sprite_*()</span></a> функции
    для получения точной информации о них). Однако основные функции рисования спрайтов полностью поддерживаются, как и встроенные переменные спрайтов. Помимо этих функций и переменных, вы также можете устанавливать и изменять свойства анимации с помощью специальных функций <span class="inline">skeleton_*</span>, которые перечислены и объяснены в справочном разделе " <a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sprites/Skeletal_Animation/Skeletal_Animation.htm">Скелетная анимация</a>".</p>
  <p> </p>
  <p> </p>
  <h2>Векторные спрайты (SWF)</h2>
  <p>Как правило, все спрайты в <span class="notranslate">GameMaker</span> используют растровые изображения, которые, несмотря на гибкость в плане содержания, накладывают ограничения на размер и количество кадров, возможных в спрайте, прежде чем использование памяти может стать непомерно большим. Векторные спрайты позволяют обойти эти ограничения
    храня и рисуя свое содержимое по-другому: вместо сетки пикселей, которая может стать блочной или нечеткой при масштабировании, они рисуются в виде треугольников с использованием векторной математики, которые могут быть увеличены (или уменьшены) без потери четкости, как показано на рисунке ниже.
    на изображении ниже:</p>
  <p><img alt="Vector And Bitmap Sprite Comparison" class="center" src="../../assets/Images/Settings/Vector_Compare.png">Чтобы помочь вам представить, как это делается, ниже показан тот же векторный спрайт Fireman, только теперь мы можем увидеть полигоны, которые
    используются для создания изображения в <span class="notranslate">GameMaker Studio 2</span>:</p>
  <p><img alt="Polygons Of A Vector Sprite" class="center" src="../../assets/Images/Settings/Vector_Polys.png">Однако в программировании игр ничто не дается даром, и компромисс с векторными спрайтами заключается в том, что они требуют больше затрат процессора при рисовании, чем растровые спрайты.
    и эта разница в скорости увеличивается по мере увеличения сложности импортируемой анимации. Кроме того, в отличие от растровых спрайтов, их использование памяти зависит от их визуальной сложности. Несмотря на это, они позволяют
    возможность добавления большой анимированной графики, что было бы невозможно при использовании традиционных растровых спрайтов.</p>
  <p>С другой стороны уравнения производительности, поскольку векторные спрайты рисуют только абсолютно необходимые пиксели (в отличие от растровых спрайтов, которые также &quot;рисуют&quot; пустое пространство вокруг изображения), они могут быть дешевле с точки зрения GPU. Кроме того, в целом
    векторные спрайты намного меньше своих растровых аналогов - для приведенного выше примера с пожарным размеры различных типов спрайтов следующие:</p>
  <p class="code">Битмап с разрешением 70x68 = 4x70x68 байт x 12 кадров = 223k<br> Вектор = 54k</p>
  <p>Если вы увеличите разрешение спрайта в четыре раза:</p>
  <p class="code">Битмап с разрешением 280x272 = 4x280x272 байт x 12 кадров = 3570k<br> Вектор = 54k</p>
  <p>Итак, как вы можете видеть, много памяти можно потенциально сэкономить, используя векторные спрайты, и у нас еще есть большой потенциал для экономии места в будущем.</p>
  <p>В настоящее время <span class="notranslate">GameMaker Studio 2</span> имеет <em>ограниченную </em>поддержку векторных спрайтов. и может импортировать векторные изображения только из файлов формата <span class="inline">SWF</span>. Способ их импорта в программу практически идентичен способу добавления обычного
    растрового изображения. Чтобы добавить векторный спрайт, создайте новый спрайт, что вызовет стандартный диалог Load Sprite, но убедитесь, что вы выбрали <span class="inline">*.swf</span> из фильтра файлов внизу.</p>
  <p><img alt="Import Vector Image" class="center" src="../../assets/Images/Settings/Import_Vector.png" style="cursor: nwse-resize;">Нажатие кнопки &quot;Загрузить&quot; добавит векторное изображение или анимацию в Браузер активов <a href="../../Introduction/The_Asset_Browser.htm">,</a>
    при этом по мере обработки файла будет отображаться индикатор выполнения. Обратите внимание, что в зависимости от сложности файла это может занять некоторое время (до минуты для более сложных анимаций). По окончании обработки вы вернетесь к диалогу свойств спрайта
    диалог свойств спрайта, который теперь будет выглядеть следующим образом:</p>
  <p><img alt="Disabled Texture Settings" class="center" src="../../assets/Images/Settings/Vector_Spine_Disabled_Options.png">Редактор спрайтов не сильно изменился, но теперь кнопка Edit <strong>Image</strong> стала серой и ее нельзя
    так как в таком спрайте нет растровых изображений для редактирования. Во-вторых, все опции текстуры тоже стали серыми. Спрайты SWF основаны на математике и, как таковые, обычно не имеют текстур, поэтому ни одна из доступных опций не применима к этому типу спрайтов.
    ни одна из доступных опций не применима к этому типу спрайтов.</p>
  <p class="note"><strong>ПРИМЕЧАНИЕ</strong>: То, как изображение выглядит в выбранном вами редакторе предварительного просмотра, не будет совпадать ни с тем, как оно выглядит в вашей игре, ни с тем, как оно выглядит в окне предварительного просмотра редактора спрайтов. Векторное изображение будет импортировано в том размере, в котором оно было создано,
    что не обязательно соответствует размеру, который отображается в окне предварительного просмотра (например, браузеры обычно масштабируют изображение для подгонки).</p>
  <p>Одним из дополнений к редактору спрайтов является то, что вы можете установить <em>качество </em>векторного спрайта при рисовании с помощью ползунка <strong>SWF Precision</strong> в верхней части. Это просто уменьшит или увеличит количество треугольников, используемых для создания спрайта.
    - значение около 50% обычно достаточно для большинства игр - однако вам следует поэкспериментировать с этим значением, если вы используете экстремальное масштабирование или испытываете проблемы с производительностью.</p>
  <p>При импорте векторных спрайтов следует учитывать ряд моментов, наиболее важным из которых является то, что некоторые функции рисования спрайтов и управления спрайтами не поддерживаются по техническим причинам, в частности, те функции рисования
    которые рисуют только часть спрайта или каким-либо образом &quot;перекашивают&quot; позицию (см. отдельные <a href="../../GameMaker_Language/GML_Reference/Drawing/Sprites_And_Tiles/Sprites_And_Tiles.htm"><span class="inline">draw_sprite_*()</span></a> функции
    для получения точной информации о них). Однако основные функции рисования спрайтов полностью поддерживаются, как и встроенные переменные спрайтов. Вы также можете установить различные значения <a class="glossterm" data-glossterm="сглаживание" href="#">сглаживания</a>(AA)
    для рисуемых SWF спрайтов с помощью функций <span class="inline"><a href="../../GameMaker_Language/GML_Reference/Drawing/Sprites_And_Tiles/draw_enable_swf_aa.htm">draw_enable_swf_aa()</a></span>, <span class="inline"><a href="../../GameMaker_Language/GML_Reference/Drawing/Sprites_And_Tiles/draw_get_swf_aa_level.htm">draw_get_swf_aa_level()</a></span> или <span class="inline"><a href="../../GameMaker_Language/GML_Reference/Drawing/Sprites_And_Tiles/draw_set_swf_aa_level.htm">draw_set_swf_aa_level()</a></span>.</p>
  <p>Вы также должны знать следующее:</p>
  <ul class="colour">
    <li>При импорте файла <span class="inline">*.SWF</span>, Actionscript <em>не </em>поддерживается, поэтому если ваш SWF полагается на его корректную работу, то, скорее всего, он не будет работать правильно. Аналогично, любые встроенные видеоклипы, имеющие свою собственную временную шкалу
      будет показан только первый кадр анимации - вся анимация должна быть на основной временной шкале.</li>
    <li>Если ваш векторный файл имеет особенно мелкие детали, вы можете иногда обнаружить, что в полученных спрайтах появляются дыры или странные треугольники. Это происходит потому, что в небольших масштабах геометрия может иногда схлопываться, создавая формы, которые просто не
      хорошо триангулируются. В этом случае у вас есть два варианта - вы можете увеличить масштаб содержимого векторного файла, что даст импортеру больше пространства для игры, или вы можете попытаться уменьшить уровень детализации объекта, который ломается.</li>
    <li><span class="notranslate">GameMaker Studio 2</span> использует размер сцены SWF в качестве границ результирующего спрайта. Однако если на сцене есть что-либо за пределами этих границ, оно все равно будет нарисовано. Это означает, что вам следует стараться не размещать ничего за пределами сцены, если вы хотите, чтобы оно было нарисовано.
      если вы не хотите, чтобы это было показано, либо использовать слой-маску, чтобы ограничить рисование этой областью.</li>
    <li>Размер сцены также влияет на размер генерируемых масок столкновений, поэтому если у вас большой размер сцены и много кадров в анимации, вы можете съесть много памяти. Поэтому используйте точные маски столкновений только в том случае.
      если это действительно необходимо.</li>
    <li>Поскольку SWF-файл создается из нескольких слоев, некоторые из которых могут перекрываться, альфа работает не совсем так, как в растровых спрайтах - перекрывающиеся области будут выглядеть не такими прозрачными, как другие части спрайта, так как пиксели в них
      перерисовываются несколько раз.</li>
    <li>Растровые заливки <em>поддерживаются </em>, хотя если вы используете плиточные растровые заливки как часть вашего SWF-файла, вам нужно убедиться, что размер растрового изображения равен двум целым, иначе оно не будет плиточным. Рендеринг текста также поддерживается, но для этого необходимо
      встроить шрифт в SWF-файл, чтобы он отобразился в результирующем спрайте. Кроме того, в настоящее время поддерживается только однострочный текст с левым выравниванием.</li>
  </ul>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Назад: <a href="../Texture_Groups.htm">Группы текстур</a></div>
        <div style="float:right">Следующий: <a href="Texture_Pages.htm">Страницы текстур</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2021 Все права защищены</span></h5>
  </div>

</body></html>