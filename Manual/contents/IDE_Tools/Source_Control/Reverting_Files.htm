<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Реверсирование файлов</title>
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <link rel="stylesheet" href="../../assets/css/default.css" type="text/css" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Section that covers Source Control reverting files" />
  <meta name="rh-index-keywords" content="Source Control - Reverting Files" />
  <meta name="search-keywords" content="revert files" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>Реверсирование файлов</h1>
  <p>В предыдущих разделах вы видели, как <a href="Repository_Options.htm">создавать репозиторий и</a> <a href="Standard_Workflow.htm">фиксировать в нем данные,</a> но что произойдет, если вы допустите ошибку и захотите &quot;откатиться&quot; к предыдущему
    фиксацию? Давайте сделаем преднамеренную ошибку и посмотрим, как с ней справиться...</p>
  <p>Прежде всего, создайте новый ресурс - в этом примере мы создадим ресурс Script - и изначально вы не увидите значка состояния, поскольку, насколько известно из системы управления источниками, он еще не существует. В ресурс сценария добавьте простую строку
    кода, например:</p>
  <p class="code">show_debug_message(&quot;Hello World&quot;);</p>
  <p>Если теперь вы закроете редактор кода, сценарий будет сохранен, и в <a href="../../Introduction/The_Asset_Browser.htm">браузере активов</a> рядом с ним появится значок измененного файла <img alt="SCM Modified Icon" class="icon" src="../../assets/Images/Icons/SCM_Modified.png">.
    Теперь откройте окно <strong>Commit </strong>, и вы увидите, что изменения происходят в четыре этапа, поскольку новые ресурсы добавляются автоматически:</p>
  <p><img alt="Source Control Staged Changes" class="center" src="../../assets/Images/IDE Tools/SCM_StagedChanges.png">Изменения будут поэтапными:</p>
  <ul class="colour">
    <li>файл проекта <span class="inline">.yyp</span> </li>
    <li>файл представления</li>
    <li>сам сценарий <span class="notranslate">GML</span> </li>
    <li>файл <span class="inline">.yy</span>, ссылающийся на него</li>
  </ul>
  <p>Вы должны ввести сообщение о фиксации, а затем нажать кнопку <strong>Commit </strong>, как мы объясняли ранее. Теперь вернемся к нашему сценарию и изменим строку кода на (например):</p>
  <p class="code">show_debug_message(&quot;Hello World, how are you?&quot;);</p>
  <p>Когда мы закроем редактор кода, рядом со скриптом снова появится красный значок <img alt="SCM Modified Icon" class="icon" src="../../assets/Images/Icons/SCM_Modified.png">, но мы поняли, что допустили ошибку в нашем коде и хотим
    откатиться к предыдущей версии, чтобы исправить ее (конечно, можно было бы просто открыть скрипт и легко исправить его, поскольку пример очень прост, но в больших проектах такой подход обычно нецелесообразен). Что нам нужно сделать, так это <strong>вернуть </strong>наши
    изменения.</p>
  <p>Чтобы отменить изменение, нам сначала нужно снова открыть окно фиксации, поэтому мы снова переходим в <strong>Source Control</strong> &gt; <strong>Commit Changes</strong>. Наш измененный файл снова будет помещен в стек, готовый к фиксации, но это не то, что нам нужно.
    Поэтому мы нажмем кнопку <strong>Unstage All</strong>, чтобы убрать его из области постановки.</p>
  <p>Если мы теперь щелкнем правой кнопкой мыши <strong><img alt="RMB Icon" class="icon" height="24" src="../../assets/Images/Icons/Icon_RMB.png" width="21"></strong> на файле, который мы изменили, мы получим контекстное меню с опцией "Вернуть <strong>путь</strong>":</p>
  <p><img alt="Source Control Revert Path" class="center" src="../../assets/Images/IDE Tools/SCM_RevertPath.png">При выборе этой опции вы вернете файлы в предыдущее состояние, в котором они находились.</p>
  <p class="note"><strong>ВАЖНО!</strong> При реверсировании вы получите сообщение с просьбой перезагрузить или сохранить текущий проект, так как программа проверки файлов обнаружила изменения на диске:<br>
    <img alt="Source Control Warning" class="center" src="../../assets/Images/IDE Tools/SCM_Warning.png">Вы должны нажать Reload, а не save, так как сохранение сохранит то, что находится в памяти, а не перезагрузит реверсированные файлы.</p>
  <p>Это все замечательно для тех случаев, когда вы что-то редактируете и хотите внести изменения, не выполняя фиксацию, но как быть, если вы зафиксировали одно или несколько изменений и хотите откатиться к <em>предыдущей </em>фиксации? Что ж, давайте отредактируем
    наш сценарий еще раз, чтобы сказать:</p>
  <p class="code">show_debug_message(&quot;Это плохая идея&quot;);</p>
  <p>Теперь мы зафиксируем его, как и раньше, чтобы он попал под контроль исходного кода. Итак, это была плохая идея, и мы хотим сделать откат, а значит, для начала нам нужно открыть окно <strong>Source Control</strong> &gt; <strong>View History</strong>. Здесь мы увидим
    список всех предыдущих коммитов в этом окне, начиная с начального коммита, коммита для скрипта, а затем коммита для скрипта, который мы отредактировали как &quot;плохую идею&quot;:</p>
  <p><img alt="Source Control Bad Idea History" class="center" src="../../assets/Images/IDE Tools/SCM_BadIdea.png">Теперь у нас есть два варианта. Мы можем вернуть всю ревизию - что приведет к возврату всех файлов, которые были изменены, к файлам выбранного коммита.
    или мы можем изменить путь - что приведет к изменению только одного файла. Для начала давайте сделаем первый вариант:</p>
  <ul class="colour">
    <li>Щелкните правой кнопкой мыши <strong><img alt="RMB Icon" class="icon" height="24" src="../../assets/Images/Icons/Icon_RMB.png" width="21"></strong> на нашей второй фиксации в панели <strong>Commit History</strong> (фиксация &quot;Hello World&quot;).</li>
    <li>Выберите <strong>Revert To This Revision</strong> и затем выберите <strong>ReLoad</strong> в предупреждающем сообщении.</li>
  </ul>
  <p>Вы должны увидеть, что сценарий теперь имеет красный значок состояния <img alt="SCM Modified Icon" class="icon" src="../../assets/Images/Icons/SCM_Modified.png">, и если мы откроем его, то получим следующее:</p>
  <p><img alt="Source Control Revert To Revision" class="center" src="../../assets/Images/IDE Tools/SCM_RevertToRevision.png">Затем мы можем выполнить фиксацию проекта, и мы снова окажемся на прежнем месте. Однако мы также можем отменить это действие
    для файла и вернуть нашу &quot;плохую идею&quot;, сделав следующее:</p>
  <ul class="colour">
    <li>Откройте окно <strong>Commit Changes</strong>.</li>
    <li>Снимите с экрана сценарий с кодом &quot;Hello World&quot;.</li>
    <li>Щелкните правой кнопкой мыши <strong><img alt="RMB Icon" class="icon" height="24" src="../../assets/Images/Icons/Icon_RMB.png" width="21"></strong> и " <strong>Вернуть путь</strong>".</li>
  </ul>
  <p>Теперь мы снова имеем ошибочный файл в проекте! Что ж, мы можем воспользоваться этой возможностью и изменить путь только к этому файлу, а не возвращать все к предыдущей ревизии. Для этого нам нужно сделать следующее:</p>
  <ul class="colour">
    <li>Откройте окно <strong>История просмотров</strong>.</li>
    <li>Щелкните на второй фиксации (фиксация &quot;Hello World&quot;).</li>
    <li>Щелкните правой кнопкой мыши <strong><img alt="RMB Icon" class="icon" height="24" src="../../assets/Images/Icons/Icon_RMB.png" width="21"></strong> на нашем сценарии <span class="notranslate">GML</span> в панели Files и выберите <strong>Revert Path</strong>.</li>
  </ul>
  <p>У нас снова должен быть код &quot;Hello World&quot;, и мы можем сделать свежий коммит, чтобы обновить контроль исходного кода с исправленным файлом.</p>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Назад: <a href="../Source_Control.htm">Контроль источников</a></div>
        <div style="float:right">Следующее: <a href="Cloning_A_Repository.htm">Клонирование хранилища</a> </div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2021 Все права защищены</span></h5>
  </div>
  <!-- KEYWORDS
Source Control Reverting Files
reverting files
-->
  <!-- TAGS
source_control_revert
-->
</body>
</html>