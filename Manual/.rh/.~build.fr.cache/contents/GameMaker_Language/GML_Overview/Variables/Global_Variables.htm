
  
  Глобальные переменные
  Основное описание глобальной переменной - это переменная, которая, будучи объявленной, не принадлежит ни одному конкретному экземпляру, но доступна всем. Как и локальные переменные, глобальные переменные должны быть объявлены
    используя идентификатор, но в отличие от локальной переменной, глобальная переменная остается в памяти до конца игры. Таким образом, вы можете создать глобальную переменную для отслеживания (например) количества патронов у игрока, а затем просто обновлять ее.
    эту переменную в разные моменты игры, формируя любой экземпляр или функцию и в любое время. По сути, глобальная переменная не принадлежит ни одному конкретному экземпляру и может быть доступна, изменена и использована всеми экземплярами, а любые изменения, внесенные в переменную
    переменной, являются "глобальными", так как все экземпляры, использующие переменную, будут затронуты этим изменением. Давайте рассмотрим пример:
  global.food = 5;
  Мы объявляем переменную "food", написав сначала "global", а затем ".", чтобы сообщить GameMaker Studio 2, что эта переменная теперь имеет глобальную область применения.
    С этого момента мы должны будем использовать эту форму каждый раз, когда нам потребуется получить доступ к этой переменной или изменить ее каким-либо образом. Итак, мы создали новую переменную под названием "food" и объявили ее глобальной. Теперь любой
    экземпляр или функция может использовать и изменять эту переменную любым способом, и все остальные экземпляры будут "видеть" это. Например, у нас может быть другой объект еды, с которым сталкивается игрок, и в событии столкновения мы имеем:
  global.food +=1;
  У нас также есть другой объект, который рисует это значение следующим образом:
  draw_text(32, 32, "еда = " + string(global.food));
  С помощью глобальных переменных мы можем изменять значения и видеть, как эти изменения отражаются во всех экземплярах объектов, которые ссылаются на эту переменную. Как и в случае с локальными переменными, вы должны следить за тем, чтобы ваши глобальные переменные не назывались так же, как и все экземпляры.
    так как это может вызвать проблемы и привести к появлению ошибок в ваших играх из-за дублирования переменных, что иногда бывает трудно отладить. В общем, у вас должен быть один объект, в котором объявляются все ваши глобальные переменные в самом
    (например, в событии Room Start Event первого экземпляра объекта, помещенного в первую комнату игры) или в одной функции скрипта, которая объявляет их все вместе, так как это дает вам удобное место для возвращения и ссылки на все сразу, если вам нужно проверить имя переменной или изменить значение.
  ВGameMaker Studio 2 есть коллекция "встроенных" глобальных переменных, поэтому вы должны знать о них, поскольку вы можете назвать одну из своих переменных экземпляра таким же именем или захотеть иметь свою собственную глобальную переменную с таким же именем и удивляться, почему вы
    получаете ошибки! Однако их легко обнаружить, поскольку в редакторе кода они отображаются другим цветом, а также появляются в строке автозаполнения внизу. Большинство встроенных глобальных переменных очень специфичны и используются только в редких случаях.
    но есть одна важная переменная, которая используется часто и не указана в других разделах руководства:
  
    async_load
  
  Есть также три устаревшие встроенные глобальные переменные, о которых вам следует знать (эти переменные предназначены только для поддержки старых проектов предыдущих версий GameMaker, и их следует не использовать в новых проектах):
  
    счет
    здоровье
    жизни
  
  Наконец, есть две переменные, которые можно использовать для функций и методов сценария:
  
    аргумент
    счётчик аргументов
  
  Следующая форма также может быть использована для объявления глобальных переменных, но она является включено только для обратной совместимостии не рекомендуется использовать эту форму в новых проектах, поскольку будущие версии GameMaker могут ее не поддерживать.
  Вторая форма создания глобальных переменных - это объявление их как таковых с помощью объявления globalvar, точно так же, как вы объявляете локальную переменную с помощью объявления var.
  ВАЖНО! Объявление globalvar устарело и поддерживается только для старых целей. Вы всегда должны использовать идентификатор global. для обозначения глобальных переменных.
  Это (устаревшее) объявление будет использоваться следующим образом:
  globalvar food; food = 5;
  После объявления таким образом переменная "food" теперь считается глобальной и не требует префикса global. - что также означает, что гораздо сложнее идентифицировать глобальные переменные в вашем коде, а также гораздо проще получить перекрытие переменных, когда вы используете одно и то же имя переменной в разных объектах.
    при использовании одного и того же имени переменной в различных объектах или установленных расширениях. После объявления глобальной переменной доступ к ней осуществляется следующим образом:
  еда += 2;
  или:
  draw_text(32, 32, "food = " + string(food));
  Как видите, не имея ничего, что могло бы показать, что переменная является глобальной в области видимости, вы потенциально создаете себе множество тонких проблем, которые могут возникнуть в вашей игре, поэтому такого объявления следует избегать.
  Существует несколько функций, призванных помочь вам при работе с глобальными переменными, которые вы можете найти на следующей странице:
  
    Переменные функции
  
   
   
   
  
    
      
        Назад: Переменные и область применения переменных
        Следующее: Константы
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

