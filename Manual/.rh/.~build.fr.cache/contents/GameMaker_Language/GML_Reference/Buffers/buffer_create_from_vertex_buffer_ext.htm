
  
  buffer_create_from_vertex_buffer_ext
  С помощью этой функции вы выделяете часть памяти под буфер в вашей игре, заполненный данными из ранее созданного буфера вершин. Функция возвращает уникальный идентификатор буфера, который должен храниться в переменной и использоваться для всех последующих обращений к буферу. Функция принимает идентификатор буфера вершин для использования (как возвращается функцией vertex_create_buffer(),
    например), а для определения типа буфера используются следующие константы:
   
  
    
      
        Постоянная
        Описание
      
      
        буфер_фиксированный
        Буфер фиксированного размера.
      
      
        buffer_grow
        Буфер, который будет динамически "расти" по мере добавления данных
      
      
        буферная_обёртка
        Буфер, в который будут "заворачиваться" данные. Когда добавляемые данные достигнут предела размера буфера, перезапись будет помещена обратно в начало буфера, и дальнейшая запись продолжится с этого момента.
      
      
        буферный_быстрый
        Специальный "полосатый" буфер, который чрезвычайно быстро читается/записывается. Может использоваться только с типами данных buffer_u8 и должен быть выровнен по 1 байту.
      
      
        буфер_vbuffer
        Этот тип буфера должен использоваться только в качестве буфера вершин.
      
    
  
   
  Помимо типа буфера, вам также необходимо задать выравнивание байтов для буфера. Это значение зависит от данных, которые вы хотите хранить в буфере, и в большинстве случаев значение 1 вполне подходит. Однако имейте в виду, что
    для некоторых операций необходимо определенное выравнивание, и неправильное выравнивание может привести к ошибкам (подробнее о выравнивании см. в разделе Выравнивание буфера). Ниже
    является общим руководством, показывающим, какие значения наиболее подходят для каждого типа данных (если есть сомнения, используйте выравнивание 1):
  
    Строки должны быть выровнены по 1 байту.
    Знаковые или беззнаковые 8-битные целые числа могут быть выровнены по любому значению, но обратите внимание, что для быстрого буфера (см. buffer_write()) оно должно быть выровнено по 1.
    Знаковые или беззнаковые 16-битные целые числа должны быть выровнены по 2 байтам.
    Знаковые или беззнаковые 32-битные целые числа должны быть выровнены по 4 байтам
    Плавающие символы размером до 16 бит должны быть выровнены по 2 байтам. (В настоящее время не поддерживается!)
    Плавающие символы размером до 32 бит должны быть выровнены по 4 байтам.
    Плавающие символы размером до 64 бит должны быть выровнены по 8 байтам.
  
  ПРИМЕЧАНИЕ: Буферы вершин выравниваются по 1 байту, но вы можете создать буфер с любым выравниванием в зависимости от того, как вы хотите обрабатывать данные, поскольку данные вершин - это просто копия необработанной памяти в буфер.
  Последние два аргумента используются для указания диапазона данных вершин, которые вы хотите скопировать во вновь созданный буфер. Начальная вершина может быть в любом месте между 0 и количеством вершин -1, а затем вы указываете количество вершин от этой точки
    для копирования. Вы можете использовать функцию vertex_get_number() для буфера вершин, чтобы получить общее количество хранящихся вершин.
  ПРИМЕЧАНИЕ: Важно, чтобы вы удаляли любые динамически созданные ресурсы, подобные этим, из памяти, когда они вам больше не нужны, чтобы предотвратить утечку памяти, поэтому, когда вы закончите работу с созданным буфером, вы должны снова освободить его.
    использование buffer_delete(). Также обратите внимание, что буфер вершин, используемый для создания нового буфера, также не удаляется из памяти, и вы должны использовать функцию
    vertex_delete_buffer() когда она больше не нужна.
   
  Синтаксис:
  buffer_create_from_vertex_buffer_ext(vertex_buffer, type, alignment, start_vertex, num_vertices)
  
    
      
        Аргумент
        Описание
      
      
        вершинный_буфер
        Индекс буфера вершин для использования.
      
      
        тип
        Тип создаваемого буфера (см. список констант ниже).
      
      
        выравнивание
        Выравнивание байтов для буфера
      
      
        начальная_вершина
        Начальная вершина.
      
      
        num_vertices
        Общее количество вершин для копирования.
      
    
  
   
  Возвращается:
  Int (ID буфера вершин)
   
  Пример:
  var v_num = vertex_get_number(model_buff); player_buffer = buffer_create_from_vertex_buffer(model_buffer, buffer_grow, 1, 0, v_num - 1);
  Приведенный выше код выделяет память под буфер, затем копирует в него данные всех вершин из заданного буфера вершин, возвращая индекс нового буфера, который хранится в переменной "player_buffer", для дальнейшего использования.
   
   
   
  
    
      
        Назад: Буферы
        Далее: buffer_delete
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

