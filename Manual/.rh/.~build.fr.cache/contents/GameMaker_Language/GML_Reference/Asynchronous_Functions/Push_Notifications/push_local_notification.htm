
  
  push_local_notification
  Эта функция может использоваться для установки локального уведомления, которое будет показано в заданную дату в заданное время. Время "fire_time" - это дата/время, когда уведомление должно быть отправлено на пользовательское устройство ( для этого можно использовать функции даты и времени GameMaker Studio 2 ). Вы можете задать уведомлению заголовок и текст сообщения, а также строку полезной нагрузки, которая будет передана в вашу игру, когда пользователь коснется уведомления.
  ПРИМЕЧАНИЕ: аргумент "title" игнорируется на iOS, вместо него отображается название игры.
  Нажатие на уведомление запустит игру на устройстве и вызовет событие асинхронного Push-уведомления, в котором async_load    DS map может быть разобрана, чтобы проверить строку полезной нагрузки и выполнить любое необходимое действие.
  ПРИМЕЧАНИЕ: Эта функциональность ограничена iOS и Android целевыми модулями.
   
  Синтаксис:
  push_local_notification(fire_time, title, message, data);
  
    
      
        Аргумент
        Описание
      
      
        время пожара
        Дата/время отключения уведомления
      
      
        название
        Заголовок уведомления (строка)
      
      
        сообщение
        Текст сообщения уведомления (строка)
      
      
        данные
        Пакет данных для отправки в вашу игру (строка)
      
    
  
   
  Возвращается:
  Н/Д
   
  Расширенный пример
  В этом примере мы отправим локальное push-уведомление, используя следующий код:
  var fireTime = date_inc_day(date_current_datetime(), 1); var data = "daily_reward"; push_local_notification(fireTime, "Ahoy!", "Catch The Haggis Has A Present", data);
  Это позволит установить таймер, который будет "выталкивать" уведомление на устройство по истечении одного дня. По истечении дня, если ваша игра находится в фоновом режиме или не запущена, пользователю будет показано уведомление с заданным заголовком и сообщением (на
   iOS показывается название игры, а заголовок игнорируется), а затем будет вызвано асинхронное событие Push Notification Event. Обратите внимание, что если игра находится на переднем плане, когда наступит время для уведомления, оно не будет показано, но асинхронное событие
    событие все равно сработает. В самом событии вы будете обрабатывать обратный вызов примерно так:Async Event следующим образом:
  var type = ds_map_find_value(async_load, "type"); var status = ds_map_find_value(async_load, "status"); if status == 0 {
     //ошибка какого-то типа var error = ds_map_find_value(async_load, "error"); show_debug_message("error=" + string(error)); }
     else
     {
     if type == "register" {
     global.reg_id = ds_map_find_value(async_load, "reg_id"); }
     else
     {
     var data = ds_map_find_value(async_load, "data"); if data == "daily_reward" {
     global.Gold += 1000; }
     }
     }
  
   
   
   
  
    
      
        Назад: Push-уведомления
        Далее: push_get_first_local_notification
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

