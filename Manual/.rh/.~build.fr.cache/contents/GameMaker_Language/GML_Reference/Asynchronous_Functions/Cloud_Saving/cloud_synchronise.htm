
  
  облако_синхронизировать
  Эта функция обычно вызывается в начале новой игры и используется для получения текущего состояния облачного сервиса при запуске игры. Функция возвращает уникальное значение id, которое затем используется в событии Asynchronous Cloud Event для получения соответствующей информации из создаваемой карты DS.
  Эта функция отправит в облако данные, которые затем вызовут соответствующее асинхронное событие. В этом событии вы можете проверить возвращенную async_load карта DS
    на наличие следующих значений:
  
    "status": Здесь хранится код статуса, где отрицательное значение означает ошибку, описание которой будет содержаться в "errorString". Значение 0 (или положительное значение) означает успех (точные значения см. ниже),
      и "resultString" будет содержать возвращаемые данные или сообщение об успехе.
    "id": id, который был возвращен из вызванной функции. Если вы отправляете серию запросов cloud_, вам нужно знать, на какой из них вы получаете ответ, поэтому вы будете использовать это значение для сравнения со значением, которое вы сохранили при отправке запроса, чтобы найти нужный запрос.
      сохраненным при первоначальной отправке запроса, чтобы найти нужный запрос.
    "description": Описание последнего загруженного файла.
    "resultString": Здесь хранится строка, которая является блобом данных, возвращенным из облака.
    "errorString": возвращает строку ошибки для любой ошибки.
  
  Точное значение возвращаемой записи карты "статус" объясняется в следующей таблице:
   
  
    
      
        Статус Значение
        errorString / resultString
        Описание
      
      
        -1
        errorString = "Не вошел в <SERVICE>"
        Вы не смогли успешно войти в данный облачный сервис
      
      
        0
        resultString = восстановленные данные
        Новые игровые данные, загруженные из облака (после вызова cloud_synchronise)
      
      
        1
        resultString = "AlreadySynchronized"
        Нет новых данных с момента последнего вызова cloud_synchronise
      
      
        2
        resultString = "ConflictDeferral"
        Возник конфликт, но геймер решил его проигнорировать
      
      
        3
        resultString = "GameUploadSuccess"
        данные из cloud_string_save() или cloud_file_save() были успешно загружены в облако
      
      
        -n
        errorString = Описание ошибки
        Любое другое отрицательное число означает сбой синхронизации
      
    
  
   
  Синтаксис:
  cloud_synchronise();
   
  Возвращается:
  Реально
   
  Расширенный пример:
  Эта функция будет вызываться в событии, таком как событие начала игры, или в объекте, размещенном в первой комнате вашей игры. Идея заключается в том, что вы проверяете текущий блок данных с облачного сервера, чтобы увидеть, обновлен ли он.
    или нет.
  cloud_check = cloud_synchronise();
  Затем вы захотите проверить возвращаемую DS Map в асинхронном Cloud Event, чтобы получить статус и возвращаемую строку, если она есть, с помощью примерно следующего кода:
  если ds_map_find_value(async_load, "id") == cloud_check {
     if ds_map_find_value(async_load, "status") < 0 {
     show_message_async("Cloud Services not available. Please check connectivity."); }
     else
     {
     if ds_map_find_value(async_load, "status") == 0 {
     var file = file_text_open_write("Save.txt"); file_text_write_string(file, ds_map_find_value(async_load, "resultString")); file_text_close(file);
     }
     }
     }
  
  Приведенный выше код проверяет правильность вызова асинхронной функции, затем получает статус возвращаемой карты облачной DS. Если статус отрицательный, значит, что-то пошло не так, и пользователю сообщается об этом, в противном случае
    код продолжит работу, получит синхронизированные данные и запишет их в текстовый файл для последующего использования.
   
   
   
  
    
      
        Назад: Облачная экономия
        Далее: cloud_string_save
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

