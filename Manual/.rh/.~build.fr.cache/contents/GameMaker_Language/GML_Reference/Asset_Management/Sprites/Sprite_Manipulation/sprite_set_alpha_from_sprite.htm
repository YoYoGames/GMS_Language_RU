
  
  sprite_set_alpha_from_sprite
  Эта функция использует значение/насыщенность одного спрайта и умножает его на альфа-значение целевого спрайта. В идеале спрайт, используемый для создания новой альфа-карты, должен быть серо-масштабным, с белыми областями, имеющими эквивалентное альфа-значение 1 (непрозрачный), черными областями, эквивалентными альфа-значению 0 (прозрачный), и серыми областями, эквивалентными альфа-значению
    (непрозрачный), черные области - альфа 0 (прозрачный), а серые области - альфа между 0 и 1. Спрайт, альфа которого устанавливается, не может быть постоянным ресурсом, как и спрайт, используемый для установки альфа,
    так как это приведет к ошибке. Это означает, что для корректной работы функции необходимо создать два совершенно новых спрайта "на лету". Этого можно добиться с помощью поверхностей или путем создания спрайта на экране (пример кода
    пример ниже показывает, как можно добиться этого эффекта с помощью поверхностей).
  ПРИМЕЧАНИЕ: Эта функция полезна только для растровых спрайтов и не работает со спрайтами SWF или JSON (Spine).
  Ниже приведено изображение, иллюстрирующее работу этой функции:
  
   
  Синтаксис:
  sprite_set_alpha_from_sprite(ind, spr);
  
    
      
        Аргумент
        Описание
      
      
        инд
        Индекс спрайта для изменения карты прозрачности.
      
      
        spr
        Индекс спрайта, из которого нужно взять данные карты прозрачности.
      
    
  
   
  Возвращает
  Н/Д
   
  Расширенный пример:
  В этом расширенном примере мы покажем, как можно создать спрайт со специальным эффектом из двух ресурсов спрайтов. Для начала нам необходимо иметь переменную контроллера в событии Create экземпляра. Эта переменная должна гарантировать, что спрайт будет создан только
    создавался только один раз:
  spr_create = true;
  После этого нам нужно перейти к событию Draw Event и добавить этот код:
  if spr_create {
     spr_create = false; var _sw = sprite_get_width(spr_Explosion_Alpha); var _sh = sprite_get_height(spr_Explosion_Alpha); var _xo = sprite_get_xoffset(spr_Gradient); var _yo = sprite_get_yoffset(spr_Gradient); var _surf = surface_create(_sw, _sh); surface_set_target(_surf);
     draw_clear_alpha(c_black, 0); draw_sprite(spr_Gradient, 0, 0, 0, 0); sprite_index = sprite_create_from_surface(_surf, 0, 0, _sw, _sh, false, false, _xo, _yo); draw_clear_alpha(c_black, 0); draw_sprite(spr_Explosion_Alpha,
    0, _xo, _yo); var _spr = sprite_create_from_surface(_surf, 0, 0, 0, _sw, _sh, false, false, _xo, _yo); surface_reset_target();
     surface_free(_surf);
     sprite_set_alpha_from_sprite(sprite_index, _spr); sprite_delete(_spr);
     }
     draw_sprite(sprite_index, 0, x, y);
  Приведенный выше код сначала проверяет, является ли переменная control истинной или нет, и если да, то запускает код для установки альфы спрайта, устанавливая переменную в false, чтобы предотвратить выполнение кода более одного раза. В этом случае создается поверхность
    размером с альфа-маску, которую мы хотим использовать, затем рисует спрайт, альфа которого должна быть изменена, на поверхности и создает из него новый спрайт, присваивая ему sprite_index объекта. Затем код очищает поверхность и
    перерисовывает на нее спрайт с картой альфа-канала и создает еще один новый спрайт, сохраняя его индекс в локальной переменной. Наконец, новый спрайт, назначенный объекту, получает свой набор альфа-карт от этого временного спрайта, поверхность освобождается, а временный спрайт удаляется.
    удаляется.
  Осталось сделать последнюю вещь, а именно удалить спрайт, созданный для объекта, из памяти, когда он не используется. Это можно сделать либо в событии Destroy, либо в событии Room End, как показано ниже:
  sprite_delete(sprite_index);
   
   
   
  
    
      
        Назад: Манипуляция спрайтом
        Далее: sprite_set_cache_size
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

