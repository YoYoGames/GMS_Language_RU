
  
  sprite_get_info
  Эта функция используется для получения информации о заданном спрайте. Вы задаете индекс спрайта (это может быть актив, добавленный через Asset Browser, или спрайт, добавленный во время выполнения), и функция возвращает struct со следующими переменными:
   
  
    
      
        Имя переменной
        Тип данных
        Описание
      
      
        ширина
        настоящий
        Ширина спрайта (в пикселях)
      
      
        высота
        настоящий
        Высота спрайта (в пикселях)
      
      
        xoffset
        настоящий
        Смещение/приближение спрайта по оси X (в пикселях)
      
      
        yoffset
        настоящий
        Смещение/приближение спрайта по оси Y (в пикселях)
      
      
        прозрачный
        булево
        true, если спрайт помечен как прозрачный, иначе false
         (Это можно указать только через sprite_add() или аналогичные функции, и для спрайтов, созданных в IDE, будет false)
      
      
        гладкий
        булево
        true, если спрайт помечен как гладкий, иначе false
          (Это может быть задано только через sprite_add() или аналогичных функций, и будет false для спрайтов, созданных в IDE)
        
      
      
        тип
        настоящий
        Тип спрайта:
         0 - Bitmap (обычные спрайты)
         1 - SWF
         2 - Spine
      
      
        bbox_left
        настоящий
        Положение левого края ограничительной рамки (в пикселях)
      
      
        bbox_top
        настоящий
        Положение верхнего края ограничительной рамки (в пикселях)
      
      
        bbox_right
        настоящий
        Положение правого края ограничительной рамки (в пикселях)
      
      
        bbox_bottom
        настоящий
        Положение нижнего края ограничительной рамки (в пикселях)
      
      
        имя
        строка
        Имя спрайта
      
      
        num_subimages
        настоящий
        Количество подизображений (или кадров) в спрайте
      
      
        маска использования
        булево
        true, если этот спрайт использует маску столкновений, иначе false
      
      
        num_masks
        настоящий
        Количество масок в этом спрайте (будет больше 1, если спрайт использует покадровые маски)
      
      
        nineslice
        struct
         Nine Slice struct для этого спрайта, или неопределено, если у него нет данных о девяти слайсах.
      
      
        сообщения
        массив
        Массив широковещательных сообщений для этого спрайта, где каждое широковещательное сообщение является структурой, содержащей информацию о сообщении (более подробная информация в разделе "Общие данные спрайта").
      
      
        информация о кадре
        массив
        Массив кадров для этого спрайта, где каждый кадр является структурой, содержащей информацию о его синхронизации (более подробная информация в разделе "Общие данные спрайта").
      
    
  
  Эта дополнительная переменная доступна только для спрайтов Bitmap (обычных):
  
    
      
        Имя переменной
        Тип данных
        Описание
      
      
        рамы
        массив
        Массив кадров для этого спрайта, где каждый кадр - это структура, содержащая информацию о его текстуре (подробнее в разделе "Данные растрового спрайта").
      
    
  
  Эти дополнительные переменные доступны только для спрайтов Spine:
  
    
      
        Имя переменной
        Тип данных
        Описание
      
      
        num_atlas
        настоящий
        Количество используемых текстур атласа
      
      
        атлас_текстур
        массив
        Массив идентификаторов текстур, используемых для атласа
      
      
        предварительно умноженный
        булево
        true, если этот спрайт помечен как предварительно умноженный, иначе false
      
      
        имена анимации
        массив
        Массив, содержащий имена каждой анимации в этом спрайте
      
      
        имена_кожи
        массив
        Массив, содержащий имена каждого скина в этом спрайте
      
      
        кости
        массив
        Массив, содержащий структуры для каждой кости в этом спрайте (более подробная информация в разделе "Данные спрайта позвоночника")
      
      
        слоты
        массив
        Массив, содержащий структуры для каждого слота в этом спрайте (более подробная информация в разделе "Данные спрайта позвоночника").
      
    
  
   
  Функция вернет неопределенное значение, если данный спрайт не существует. Также обратите внимание, что информация, возвращаемая в этой структуре, должна рассматриваться только для чтения, так как изменение любой из этих переменных не повлияет на спрайт.
  Разделы ниже содержат информацию о массивах и структурах, включенных в возвращаемую структуру в зависимости от типа спрайта:
  Общие данные спрайта
  
    В этом разделе содержится информация о переменных, включенных в struct для всех видов спрайтов.
    Переменная messages - это массив, который содержит информацию о широковещательных сообщениях, существующих в данном спрайте. Каждое широковещательное сообщение в этом массиве представляет собой структуру, содержащую следующие переменные:
    
      
        
          Имя переменной
          Тип данных
          Описание
        
        
          рама
          настоящий
          Время этого широковещательного сообщения от начала анимации (в кадрах)
        
        
          сообщение
          строка
          Строка широковещательного сообщения
        
      
    
     
    Переменная frame_info - это массив, содержащий информацию о тайминге кадров спрайта. Каждый кадр в этом массиве представляет собой структуру, содержащую следующие переменные:
    
      
        
          Имя переменной
          Тип данных
          Описание
        
        
          рама
          настоящий
          Время начала этого кадра (в кадрах)
        
        
          индекс_изображения
          настоящий
          Индекс изображения данного кадра
        
      
    
     
  
  Данные растрового спрайта
  
    В этом разделе содержится информация о переменных, включенных в struct для спрайтов Bitmap (спрайты, которые не являются спрайтами типа Spine или SWF).
    Переменная frames - это массив, который содержит информацию о текстурах кадров спрайта. Каждый кадр в этом массиве представляет собой структуру, содержащую следующие переменные:
    
      
        
          Имя переменной
          Тип данных
          Описание
        
        
          x
          настоящий
          Позиция X этого кадра на странице текстуры (в пикселях).
        
        
          y
          настоящий
          Позиция Y этого кадра на странице текстуры (в пикселях).
        
        
          w
          настоящий
          Логическая ширина кадра (в пикселях), используемая внутренне
        
        
          h
          настоящий
          Логическая высота кадра (в пикселях), используемая внутренне
        
        
          текстура
          настоящий
          Идентификатор страницы текстуры для этого кадра
        
        
          исходная_ширина
          настоящий
          Исходная ширина кадра (в пикселях)
        
        
          исходная_высота
          настоящий
          Исходная высота кадра (в пикселях)
        
        
          ширина_обрезки
          настоящий
          Фактическая ширина кадра на странице текстуры после обрезки и масштабирования (поскольку GMS2 автоматически обрезает пустое пространство вокруг изображения, а также масштабирует его, если оно не помещается).
        
        
          высота_обрезки
          настоящий
          Фактическая высота кадра на странице текстуры после обрезки и масштабирования
        
        
          x_смещение
          настоящий
          Смещение по оси X от левого края исходного изображения до левого края обрезанного участка
        
        
          y_смещение
          настоящий
          Смещение по оси Y от верхнего края исходного изображения до верхнего края обрезанного участка
        
      
    
     
  
  Данные по позвоночнику
  
    В этом разделе содержится информация о переменных, включенных в struct для спрайтов Spine.
    Переменная bones - это массив, который содержит информацию обо всех костях в данном спрайте Spine. Каждая кость в этом массиве представляет собой структуру, содержащую следующие переменные:
    
      
        
          Имя переменной
          Тип данных
          Описание
        
        
          родитель
          строка
          Имя родительской кости, или неопределенное, если у этой кости нет родителя.
        
        
          имя
          строка
          Название этой кости
        
        
          индекс
          настоящий
          Индекс этой кости
        
        
          длина
          настоящий
          Длина этой кости
        
        
          x
          настоящий
          Положение X этой кости
        
        
          y
          настоящий
          Положение Y этой кости
        
        
          вращение
          настоящий
          Вращение этой кости
        
        
          масштаб_x
          настоящий
          (Внутри позвоночника) Значение шкалы на X
        
        
          масштаб_y
          настоящий
          (Внутри позвоночника) Значение шкалы на Y
        
        
          сдвиг_х
          настоящий
          (Внутри позвоночника) Значение сдвига на X
        
        
          сдвиг_y
          настоящий
          (Внутри позвоночника) Значение сдвига по Y
        
        
          режим преобразования
          настоящий
          (Внутри позвоночника) Режим трансформации
        
      
    
     ПРИМЕЧАНИЕ: Обратитесь к документации Spine для получения дополнительной информации о внутренних переменных Spine.
    Переменная slots - это массив, который содержит информацию обо всех слотах в данном спрайте Spine. Каждый слот в этом массиве представляет собой структуру, содержащую следующие переменные:
    
      
        
          Имя переменной
          Тип данных
          Описание
        
        
          имя
          строка
          Название слота
        
        
          индекс
          настоящий
          Индекс слота
        
        
          кость
          строка
          Название кости слота, или "( none)", если для этого слота нет кости.
        
        
          вложение
          строка
          Имя вложения
        
        
          красный
          настоящий
          Красная составляющая цвета слота (0-1)
        
        
          зеленый
          настоящий
          Зеленая составляющая цвета слота (0-1)
        
        
          синий
          настоящий
          Синяя составляющая цвета слота (0-1)
        
        
          альфа
          настоящий
          Альфа-компонент цвета слота (0-1)
        
        
          blendMode
          настоящий
          (Внутренний к корешку) Режим смешивания для корешка
        
        
          dark_red*
          настоящий
          Красная составляющая темного цвета слота (0-1)
        
        
          dark_green*
          настоящий
          Зеленая составляющая темного цвета слота (0-1)
        
        
          dark_blue*
          настоящий
          Синяя составляющая темного цвета слота (0-1)
        
        
          dark_alpha*
          строка
          Альфа-компонент темного цвета слота (0-1)
        
      
    
    * ПРИМЕЧАНИЕ: Переменные темного цвета доступны только в том случае, если в слоте включена функция Tint Black.
     
  
   
   
  Синтаксис:
  sprite_get_info(index);
  
    
      
        Аргумент
        Описание
      
      
        индекс
        Индекс спрайта, для которого нужно получить информацию.
      
    
  
   
  Возвращает
  Структура (или неопределенная)
   
  Пример:
  var _info = sprite_get_info(sprite_index);
     if (_info != undefined && _info.type == 0) {
     var _messages = _info.messages; var _messageCount = array_length(_messages);      for (var i = 0; i < _messageCount; i ++) { var _message = _messages[i]; show_debug_message("Message
    в кадре " + string(_message.frame) + ": " + _message.message); }  }
  
  Приведенный выше код получает информационную структуру для спрайта экземпляра, а затем проверяет, не является ли он неопределенным и не равен ли его тип 0 (что означает, что это растровый спрайт). В этом случае он получает массив широковещательных сообщений для этого спрайта и
    затем запускает цикл for для печати каждого широковещательного сообщения (вместе с его кадром) в выходной журнал.
   
   
  
    
      
        Назад: Информация о спрайте
        Далее: sprite_exists
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

