
  
  layer_script_end
  С помощью этой функции вы можете назначить слою скрипт-функцию, которая будет вызываться после отрисовки слоя. При добавлении функции к слою таким образом, она будет выполняться в конце
   каждого из различных событий рисования, поэтому вы можете захотеть проверить в назначенной функции, какое событие в данный момент завершает отрисовку, и адаптировать код в соответствии с этим. Это можно сделать, проверив тип события    и/или номер_события (см. расширенный пример ниже). Обратите внимание, что функция не предназначена для вызова в любых событиях рисования или событиях шага, а должна вызываться только
    в начале комнаты в коде создания комнаты или в событии Create Event / Room Start Event экземпляра.
   
  Синтаксис:
  layer_script_end(layer_id, script)
  
    
      
        Аргумент
        Описание
      
      
        идентификатор слоя
        Уникальное значение ID слоя, на который нужно нацелиться (или имя слоя в виде строки).
      
      
        скрипт
        Индекс функции сценария для назначения слою
      
    
  
   
  Возвращается:
  Н/Д
   
  Расширенный пример:
  В этом расширенном примере мы сначала покажем, как устроена простая скрипт-функция для установки некоторых унифицированных данных шейдера, чтобы при отрисовке данного слоя эта функция была запущена и шейдер работал правильно. В примере стоит
    отметить, как мы проверяем, какое событие вызывается, чтобы остальная часть функции выполнялась только при определенном событии, которое мы требуем, чтобы она работала - в данном случае только при главном событии рисования:
  /// @function layer_shader_start(); function layer_shader_start()
     {
     if event_type == ev_draw {
     if event_number == 0 {
     color_to_find = shader_get_uniform(sShaderDemo5, "f_Colour1"); color_to_set = shader_get_uniform(sShaderDemo5, "f_Colour2"); shader_set(s_ColourChanger);
     shader_set_uniform_f(color_to_find, 1,1,1 ); shader_set_uniform_f(color_to_set, 1,0,0 ); }
     }
     }
  
  Затем у нас будет сопутствующая функция для сброса шейдера после завершения рисования:
  /// @function layer_shader_end(); function layer_shader_end()
     {
     if event_type == ev_draw {
     if event_number == 0 {
     shader_reset();
     }
     }
     }
  
  Теперь, когда мы определили наши скриптовые функции для установки шейдера, мы должны назначить их определенному слою, чтобы слой знал, что их нужно вызывать. Это можно сделать в коде создания комнаты, или в событии создания, или в событии запуска комнаты какого-либо объекта контроллера (их нужно установить один раз).
    объекта контроллера (их не нужно устанавливать на каждом шаге, а лучше один раз при запуске комнаты или при первоначальном создании слоя):
  var lay_id = layer_get_id("Instances"); layer_script_begin(lay_id, layer_shader_start); layer_script_end(lay_id, layer_shader_end);
  Этот последний блок кода назначает скрипты слою.
   
   
   
  
    
      
        Назад: Общие функции слоя
        Далее: layer_shader
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

