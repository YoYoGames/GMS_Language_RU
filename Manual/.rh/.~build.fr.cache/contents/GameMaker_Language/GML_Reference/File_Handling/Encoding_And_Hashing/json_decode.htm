
  
  json_decode
  ВАЖНО! Эта функция - хотя она все еще актуальна - была заменена функцией json_parse(), и мы рекомендуем использовать ее только для поддержки старых версий.
  JSON (JavaScript Object Notation) - это легкий формат обмена данными, который легко читать и писать как людям, так и машинам. Он построен на двух основных структурах:
  
    Коллекция пар имя/значение, называемая Карта DS в GameMaker Studio 2, но также известна как "словарь" или "объект".
    Упорядоченный список значений, называемый Список DS в GameMaker Studio 2, но его также можно назвать "массивом" или "последовательностью".
  
  С помощью этой функции вы можете декодировать часть JSON и преобразовать ее в DS Map, готовую к использованию в GameMaker Studio 2. Если декодируемый JSON требует иерархии списков и карт внутри центральной карты DS, они тоже декодируются и также
    создаются для вас, используя следующие правила (обратите внимание, что эти правила применяются только к структуре верхнего уровня):
  
    JSON - одно значение - возвращает карту DS с единственной записью "default", которая является значением
    JSON - массив объектов или значений - возвращает DS карту с единственной записью "default", которая является DS списком объектов или значений
    JSON - объект - возвращает карту DS, в которой содержатся записи об объекте
  
  ПРИМЕЧАНИЕ: При декодировании массивов JSON существует карта с ключом "default" ТОЛЬКО когда массив является структурой верхнего уровня, и ТОЛЬКО для этого массива верхнего уровня. Внутренние списки декодируются непосредственно в DS map, не будучи заключенными в DS map.
  ПРИМЕЧАНИЕ: Если вы записали массивы GameMaker в верхний уровень, или как содержимое карты DS или списка DS, они будут декодированы как списки DS, а не массивы.
  Обычно вы знаете, в какие ключи расшифровывается JSON, но если это не так, то вы можете воспользоваться функцией ds_map_size(), ds_map_find_first()    и ds_map_find_next() для разбора карты и получения необходимой информации.
  ПРИМЕЧАНИЕ: GameMaker Studio 2 создает необходимые DS карты и списки из JSON, а для очистки достаточно удалить карту или список верхнего уровня, и GameMaker Studio 2 автоматически удалит из памяти все нижележащие карты и списки.
  ВАЖНО: Вы не можете иметь 64-битные числа в вашем JSON, так как они не будут работать правильно из-за того, что они не обрабатываются форматом JSON.
   
  Синтаксис:
  json_decode(string)
  
    
      
        Аргумент
        Описание
      
      
        строка
        Строка формата JSON, которую вы передаете функции для декодирования
      
    
  
   
  Возвращается:
  Идентификатор карты DS или -1 в случае неудачи
   
  Пример:
  var resultMap = json_decode(requestResult); var list = ds_map_find_value(resultMap, "default"); var size = ds_list_size(list); for (var n = 0; n < ds_list_size(list); n++;)  {
     var map = ds_list_find_value(list, n); var curr = ds_map_find_first(map); while (is_string(curr)) {
     global.Name[n] = ds_map_find_value(map, "name"); curr = ds_map_find_next(map, curr); }
     }
     ds_map_destroy(resultMap);
  
  Приведенный выше код декодирует строку JSON и разбирает ее для создания глобального массива.
   
   
   
  
    
      
        Назад: Кодирование файлов
        Далее: json_stringify
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

