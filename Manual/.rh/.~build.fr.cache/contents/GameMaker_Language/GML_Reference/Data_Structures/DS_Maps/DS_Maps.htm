
  
  Карты DS
  Структура данных DS map является исключительно полезной, поскольку она позволяет хранить пары ключей и значений. Например, персонаж в вашей игре может иметь количество различных предметов(ключи), а для каждого отдельного предмета он может иметь определенное их количество (значения), как в ролевой игре, где у вас может быть 10 зелий здоровья, 5 зелий маны, 100 золота.
   (значения), как в ролевой игре, где у вас может быть 10 зелий здоровья, 5 зелий маны и 100 золотых. Карты хранят такие пары все вместе в одном месте, и вы можете добавлять пары на карту и искать значение, соответствующее определенным ключам
    также с помощью некоторых простых функций. Однако есть несколько вещей, которые вы должны знать о картах, прежде чем использовать их! Карты не сортируются каким-либо (узнаваемым) способом, а это значит, что для поиска определенного ключа вам, возможно, придется просмотреть всю карту (что очень медленно).
    (что очень медленно). Также не существует способа хранения двух одинаковых ключей, и вы не можете присвоить одному ключу два значения.
  ПРИМЕЧАНИЕ: Как и все динамические ресурсы, структуры данных занимают память, поэтому их всегда следует уничтожать, когда они больше не нужны, чтобы предотвратить утечку памяти, которая замедлит и в конечном итоге приведет к краху вашей игры.
  ПРИМЕЧАНИЕ: если вам нужно проверить, существует ли структура данных, вы можете использовать функцию ds_exists() функцию.
  Помимо конкретных функций, перечисленных ниже, вы можете использовать выражение (называемое аксессором) для добавления или изменения содержимого вашей карты DS. Этот аксессор похож на массив 1D со следующим синтаксисом:
  map_index[? key]
  Более подробную информацию, а также примеры можно найти на странице "Обзор GML ", посвященной аксессорам.
  Существуют следующие функции, работающие с картами DS.
   
  
    ds_map_exists
    ds_map_create
    ds_map_add
    ds_map_clear
    ds_map_copy
    ds_map_replace
    ds_map_delete
    ds_map_empty
    ds_map_size
    ds_map_find_first
    ds_map_find_last
    ds_map_find_next
    ds_map_find_previous
    ds_map_find_value
    ds_map_keys_to_array
    ds_map_values_to_array
    ds_map_set
    ds_map_read
    ds_map_write
    ds_map_destroy
  
   
  Для сохранения и загрузки карты DS доступны еще четыре функции. Эти функции обфусцируют карту и сохраняют ее в безопасном месте на целевой платформе, используя формат файла, который означает, что конечный файл не может быть передан
    между устройствами:
   
  
    ds_map_secure_save
    ds_map_secure_save_buffer
    ds_map_secure_load
    ds_map_secure_load_buffer
  
   
  Одно из применений карт DS - работа с JSON, поэтому существует несколько специальных функций, предназначенных именно для этого:
   
  
    ds_map_add_list
    ds_map_add_map
    ds_map_replace_list
    ds_map_replace_map
    ds_map_is_list
    ds_map_is_map
  
  ПРИМЕЧАНИЕ: Хотя эти функции позволяют добавлять списки и карты внутри карты, они бесполезны для чего-либо, кроме JSON, и вложенные карты и списки не будут правильно прочитаны при записи на диск или доступе любым другим способом.
   
   
   
  
    
      
        Назад: Структуры данных
        Следующий: Очереди приоритетов DS
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

