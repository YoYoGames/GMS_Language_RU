
  
  steam_ugc_download
  С помощью этой функции вы можете загрузить изображение предварительного просмотра для любого заданного элемента пользовательского контента. ugc_handle - это уникальное идентификационное значение для изображения (которое можно получить с помощью функции steam_ugc_send_query()),
    а имя файла назначения - это имя (и локальный путь в песочнице Steam ), которое вы хотите дать файлу изображения после завершения загрузки.
  При использовании этой функции будет запущено асинхронное событие Steam, которое сообщит подробности запрашиваемого файла изображения, содержащего следующие пары ключ/значение в файле
    async_load ds_map:
  
    " id" - Идентификатор async, возвращаемый вызывающей функцией
    "result" - Результат операции (вещественное значение). Это будет либо GML-константа ugc_result_success, либо какое-то другое вещественное число. Поэтому вы должны проверить наличие этой константы, чтобы убедиться, что вызов был успешным, и если
      в противном случае что-то сработало неправильно. Остальные возможные возвращаемые значения отображаются как результат значения Steam "EResult", и вы должны увидеть steamclientpublic .h в заголовках SDK для всех 89 возможных значений.
    " event_type" - Этот ключ будет содержать значение " ugc_download".
    "original_filename" - Этот ключ содержит оригинальное имя файла изображения на сервере (строка ).
    " dest_filename" - Этот ключ содержит имя файла изображения, которое вы передали (строка).
    " ugc_handle" - Этот ключ содержит значение ugc_handle, которое вы передали вызывающей функции.
  
   
  Синтаксис:
  steam_ugc_download(ugc_handle, dest_filename);
  
    
      
        Аргумент
        Описание
      
      
        ugc_handle
        Уникальный идентификатор для загружаемого превью.
      
      
        dest_filename
        Имя файла, под которым будет сохранен предварительный просмотр.
      
    
  
   
  Возвращается:
  Асинхронный идентификатор
   
  Расширенный пример:
  В этом примере мы сначала вызываем функцию и сохраняем значение идентификатора async в переменной:
  steam_get= steam_ugc_download(steam_handle, "\UGC\Preview_file.png");
  Затем он отправит запрос на файл в Steam API, создав асинхронное событие, с которым мы будем работать следующим образом:
  var event_id = async_load[? "id"]; if event_id == steam_get {
     var type = async_load[? "event_type"]; if type == "ugc_download" {
     sprite_delete(preview_sprite); preview_sprite = sprite_add(async_load[? "dest_filename"], 0, false, false, 0, 0); }
     }
  
  Приведенный выше код проверяет тип события, а затем создает спрайт из загруженного изображения.
   
   
   
  
    
      
        Назад: UGC
        Далее: steam_is_screenshot_requested
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

