
  
  steam_ugc_send_query
  Эта функция может быть использована для отправки запроса. Сначала вы определяете запрос, используя соответствующие функции steam_ugc_create_query_* (), которые возвращают "хэндл запроса". Этот хэндл затем используется для установки фильтров и т.д. .... перед тем, как будет использован в этой функции для отправки запроса.
    используется в этой функции для отправки запроса. Функция возвращает уникальное значение async ID, которое может быть использовано для правильной проверки деталей в событииSteam Async.
    Это событие будет иметь async_load DS map, которая будет заполнена следующими парами ключ/значение:
  
    " id" - Идентификатор async, возвращаемый функцией, которая вызвала событие
    "result" - Результат операции (вещественное значение). Это будет либо GML-константа ugc_result_success, либо какое-то другое вещественное число. Поэтому вы должны проверить наличие этой константы, чтобы убедиться, что вызов был успешным, и если
      в противном случае что-то сработало неправильно. Остальные возможные возвращаемые значения отображаются как результат значения Steam "EResult", и вы должны увидеть steamclientpublic .h в заголовках SDK для всех 89 возможных значений.
    " event_type" - Строка " ugc_query".
    " num_results" - Количество возвращаемых результатов (максимум 50)
    " total_matching" - Общее количество совпадающих результатов
    " cached_data" - Указывает, были ли эти данные получены из локального кэша на диске или нет (будет либо true, либо false).
    "results_list" - индекс списка DS, где каждая запись списка является индексом DS Map, содержащим подробную информацию о конкретном элементе
  
  Получив событие async типа "ugc_query", вы можете разобрать список результатов и извлечь следующую информацию из каждой из карт DS (по одной карте на элемент списка):
  
    "published_file_id" " - Содержит уникальный идентификатор опубликованного файла для элемента
    " file_type" - Тип используемого файла
    " creator_app_id" - Steam ID создателя предмета
    "consumer_app_id" - Steam ID потребителя товара
    " title" - Название элемента
    "description" - Описание элемента
    " steam_id_owner" - Steam ID владельца предмета
    " time_created" - Время, когда элемент был впервые создан
    " time_updated" - Последний раз, когда элемент был обновлен
    " time_added_to_user_list" - Время, когда элемент был подписан на него
    " visibility" - Видимость элемента (см. steam_ugc_set_item_visibility() возвращаемые константы)
    " banned" - Был ли предмет запрещен (true) илинет (false).
    "accepted_for_use" - Принят ли элемент к использованию (true) илинет (false).
    " tags_truncated" - Краткая версия тегов в виде массива
    " tags"- Строка, содержащая теги для элемента, каждый из которых разделяется запятой.
    "handle_file" - Уникальное имя файла для элемента
    "handle_preview_file" - Уникальное имя файла предварительного просмотра изображения для элемента (может быть использовано в качестве аргумента с параметром steam_ugc_download() для загрузки изображения предварительного просмотра)
    " filename" - Имя файла элемента
    " file_size" - Размер файла элемента
    " preview_file_size" - Размер изображения предварительного просмотра
    " url"- Полный URL-адрес элемента
    " votes_up" - Количество полученных голосов "против
    " votes_down" - Количество полученных голосов "против
    " score" - Общая оценка предмета
    "account_id_owner" - ID аккаунта от владельца Steam ID (это можно использовать в функции steam_ugc_create_query_user_ex())
  
   
  Синтаксис:
  steam_ugc_send_query(ugc_query_handle);
  
    
      
        Аргумент
        Описание
      
      
        ugc_query_handle
        Ручка запроса для отправки.
      
    
  
   
  Возвращается:
  Булево
   
  Пример:
  var query_handle = steam_ugc_create_query_all(ugc_query_RankedByTrend, ugc_match_Items, 1); steam_ugc_query_add_required_tag(query_handle, "RPG"); steam_ugc_query_set_return_long_description(query_handle, true); steam_ugc_query_set_allow_cached_response(query_handle,
    true); query_ID = steam_ugc_send_query(query_handle);
  Приведенный выше код создает запрос запроса и сохраняет его хэндл в локальной переменной для дальнейшего использования в остальных функциях, которые определяют запрос перед отправкой запроса.
   
   
   
  
    
      
        Назад: UGC
        Далее: steam_ugc_download
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

