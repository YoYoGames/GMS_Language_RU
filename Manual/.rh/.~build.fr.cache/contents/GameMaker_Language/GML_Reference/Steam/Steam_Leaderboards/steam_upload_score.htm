
  
  steam_upload_score
  Эта функция отправит результат в заданную таблицу лидеров. Загружаемый результат является вещественным числом, а имя таблицы лидеров - строкой, которая была определена при создании таблицы лидеров с помощью функции steam_create_leaderboard().
    В случае неудачи функция вернет значение -1, в то время как успешная отправка вернет уникальный ID для выгрузки и вызовет асинхронное событиеSteam Event. Это
    событие создаст DS Map во встроенной переменной async_load со следующими парами ключ/значение:
  
    " event_type" - Этот ключ будет иметь значение " leaderboard_upload", когда будет вызван этой функцией.
    " lb_name" - Этот ключ содержит название таблицы лидеров, которая была опубликована в
    "success" - Будет равно 1, если сообщение удалось, 0 - нет
    "updated" - Будет 1, если результат в таблице лидеров был действительно обновлен (т.е. новый результат был лучше) или 0 в противном случае.
    " post_id" - Этот ключ должен соответствовать значению ID, возвращенному вызовом загрузки.
    " score" - Этот ключ хранит оценку, которая была опубликована
  
   
  Синтаксис:
  steam_upload_score(lb_name, score);
  
    
      
        Аргумент
        Описание
      
      
        lb_name
        Имя таблицы лидеров, в которую вы загружаете результаты (строка).
      
      
        счет
        Оценка, которую нужно загрузить (реальное число).
      
    
  
   
  Возвращается:
  Реально
   
  Расширенный пример:
  В этом примере мы сначала загрузим результат, а затем разберем карту async_load, возвращенную в случае успеха. В приведенном ниже коде показан типичный пример загрузки:
  if (hp <= 0) {
     upload_ID = steam_upload_score("Game Scores", score); if (!upload_ID) {
     alarm[0] = room_speed; }
     }
  
  Обратите внимание, что мы установили сигнал тревоги при неудачном вызове. Это будет использоваться для повторной попытки загрузки в более позднее время, и вы можете добавить туда дополнительный код для повторной попытки загрузки или для сохранения результата в текстовый файл, если он продолжает оставаться неудачным, и т.д... Теперь мы добавим следующее
    в событиеSteam async для экземпляра, управляющего оценками:
  var type = ds_map_find_value(async_load, "event_type"); if (type == "leaderboard_upload") {
     var lb_ID = ds_map_find_value(async_load, "post_id"); if lb_ID == upload_ID {
     var lb_name = ds_map_find_value(async_load, "lb_name"); var lb_done = ds_map_find_value(async_load, "success"); var lb_score = ds_map_find_value(async_load, "score"); var
    lb_updated = ds_map_find_value(async_load, "updated"); show_debug_message("leaderboard post id:" + string(lb_ID) + " to lb:" + string(lb_name) + " with score:" + string(lb_score) + " updated=""
    + string(lb_updated)); if (lb_done) {
     show_debug_message("- Succeeded"); }
     else
     {
     show_debug_message("- Failed"); }
     }
     }
  
  в примере мы просто выводим возвращаемые значения в окно компилятора в качестве отладочных сообщений, но вы можете использовать это событие для работы с информацией любым удобным для вас способом.
   
   
   
  
    
      
        Назад: Таблицы лидеров
        Далее: steam_upload_score_buffer
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

