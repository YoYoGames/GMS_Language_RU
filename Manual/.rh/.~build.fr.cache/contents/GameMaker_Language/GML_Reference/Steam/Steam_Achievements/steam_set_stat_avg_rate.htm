
  
  steam_set_stat_avg_rate
  Эта функция позволяет установить средний тип статистики с эффектом "скользящего окна" для среднего значения. Значение "session_count" - это текущее значение, которое вы хотите усреднить, а "session_length" - это количество
    игрового времени с момента последнего вызова функции. Более подробную информацию о том, как это можно использовать, смотрите в расширенном примере ниже.
   
  Синтаксис:
  steam_set_stat_avg_rate(stat_name, session_count, session_length);
  
    
      
        Аргумент
        Описание
      
      
        имя_статьи
        Имя статистики, которую нужно установить (строка).
      
      
        счётчик сессий
        Значение для получения среднего значения (вещественное число)
      
      
        длина_сессии
        Время, прошедшее с момента последней установки статистики (вещественное число).
      
    
  
   
  Возвращается:
  Н/Д
   
  Расширенный пример:
  Поскольку функция средней статистики может быть сложной для понимания, мы проиллюстрируем ее использование на следующем примере. Рассмотрим случай, когда вы хотите отследить среднюю статистику, например, "Очки, заработанные за час". Один из подходов заключается в том, чтобы
    иметь две статистики: целочисленную "TotalPoints" и плавающую " TotalPlayTimeHours", а затем разделить общее количество очков на общее время, чтобы получить значение "Points per Hour".
  Однако, как только игрок накопит значительное количество игрового времени, рассчитанное среднее значение будет меняться крайне медленно, и чем больше пользователь играет в игру, тем меньше будет реагировать это среднее значение. Если пользователь провел в игре 100 часов
    в игру, рассчитанное среднее значение "отстанет" примерно на 50 часов из этого времени, и если пользователь повысит свой навык, он не увидит ожидаемого увеличения "очков в час". Чтобы обойти эту проблему, мы можем использовать "скользящее окно".
    для расчета "Очков в час" только за последние 10 часов игры.
  Итак, чтобы использовать эту функцию, нам нужно создать статистику Steam (в панели управления игрой на Workshop) под названием "AvgPointsPerHour" и установить ее свойство Window на 10. Теперь в вашей игре вам нужно добавить несколько глобальных переменных
    в начальный экземпляр:
  global.Points = 0; global.Time = 0;
  Затем у вас будет некоторый объект контроллера для подсчета глобальной переменной "Time" в будильнике (например) каждую секунду, в то время как ваш игровой процесс будет влиять на глобальную переменную "Points". Через регулярные промежутки времени во время игры (опять же,
    в объекте контроллера, возможно, в будильнике, или в интервалах от опроса значения "Time") вы бы устанавливали статистику следующим образом:
  steam_set_stat_avg_rate("AvgPointsPerHour", global.Points, (global.Time / 3600)); global.Points = 0; global.Time = 0;
  Обратите внимание, что мы делим время на 3600, поскольку нам нужно время в часах, а не в секундах, и после этого мы сбрасываем глобальную переменную "Points" и глобальную переменную "Time" в 0, чтобы при следующем вызове функции мы
    получим новое среднее значение для статистики. Теперь, что будет делать Steam, это брать это значение, которое вы отправили, и создавать среднее значение за время, которое было установлено для нашего "окна".
   
   
   
  
    
      
        Назад: Достижения и статистика
        Далее: steam_get_stat_int
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

