
  
  xboxlive_matchmaking_join_session
  Эта функция позволяет присоединиться к определенной сессии через хэндл сессии. Это похоже на присоединение к приглашению сессии, но полезно, когда у вас есть собственный сервер, выполняющий матчмейкинг, а не полагающийся на матчмейкинг xbox live.
  Функция требует, чтобы вы предоставили идентификатор пользователя, который вы можете получить для конкретного геймпада, вызвав функцию xboxlive_user_for_pad() функцию, а также шаблон Secure Device
    Association, который вы должны были предварительно создать на панели управления XDP.
  Чтобы получить хэндл сессии, необходимо сначала получить "идентификатор корреляции" из сессии, к которой вы хотите присоединиться. При создании оригинальной сессии асинхронное социальное событие будет "session_created" и оно будет
    включает запись " correlationid" в возвращаемую карту (см. xboxlive_matchmaking_create()). Вам нужно будет передать этот идентификатор обратно на сервер, чтобы он затем был передан при
    получении запроса на сопоставление. Как только присоединяющаяся игра получит "идентификатор корреляции" от сервера, она может вызвать эту функцию, передав идентификатор корреляции в качестве аргумента session handle.
  Функция вернет -1, если произошла ошибка (в этом случае должен появиться консольный вывод с подробным описанием проблемы), или значение Request ID в противном случае. Значение Request ID может быть использовано для определения правильного Social Asynchronous Event для этой функции. Это событие будет запущено после создания сессии и будет содержать DS Map в переменной async_load со следующими
    парами ключ/значение:
  
    "requestid" - содержит идентификатор запроса, возвращенный вызывающей функцией
    "status" - содержит строку "session_player_joined" для информирования о том, какой тип события был вызван.
    "sessionid" - содержит идентификатор сессии, или -1 в случае неудачи.
    "sessionOwner< index> "- содержит ID хозяина сессии, если сессия была найдена (< index> - это значениеот 0 до "num_results" - 1)
    " id" - содержит константу MATCHMAKING_SESSION
    " error" - будет 0, если все в порядке, или -1, если что-то не получилось
  
  Когда новый игрок присоединяется к сессии, карта DS будет содержать эти пары ключ/значение:
  
    " id" - содержит константу MATCHMAKING_SESSION
    "sessionid" - содержит идентификатор сессии
    "status" - содержит строку "session_player_joined".
    "requestid" - Значение ID, которое было возвращено функцией, создавшей запрос
  
   
  Синтаксис:
  xboxlive_matchmaking_join_session(user_id, session_handle, sdatemplate);
  
    
      
        Аргумент
        Описание
      
      
        идентификатор пользователя
        Указатель идентификатора пользователя для использования
      
      
        рукоятка_сеанса
        "Идентификатор корреляции", используемый для идентификатора сессии (см. описание выше)
      
      
        sdatemplate
        Имя шаблона ассоциации безопасных устройств, который необходимо использовать
      
    
  
   
  Возвращается:
  Идентификатор запроса (целое число)
   
  Пример:
  Request_ID = xboxlive_matchmaking_join_session(global.UserID, global.SessionID, "PeerServerTraffic");
  Вышеприведенная команда отправит запрос на присоединение к заданной многопользовательской сессии, сохраняя значение ID запроса в переменной, чтобы его можно было проверить в асинхронном событии.
   
   
   
  
    
      
        Назад: Сопоставление
        Далее: xboxlive_matchmaking_session_leave
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

