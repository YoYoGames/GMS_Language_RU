
  
  mp_grid_add_cell
  С помощью этой функции мы можем пометить отдельные ячейки в заданной сетке MP как "запрещенные", что означает, что функции поиска пути никогда не будут пересекать их. Обычно вы работаете в координатах x/y комнаты, а не в координатах ячеек MP-сетки. Поэтому давайте рассмотрим следующее изображение, которое показывает, как эти два понятия могут соотноситься:
  Как вы видите, сетка mp_grid пронумерована как ряд ячеек (начиная с 0,0 в левом верхнем углу).
    углу), и когда вы помещаете эту сетку над комнатой, существует прямая корреляция между координатами комнаты (которые также начинаются с 0,0 в левом верхнем углу) и ячейками внутри сетки. На изображении видно, что экземпляр в позиции 260,130
    попадает в ячейку сетки 8,4. Математически можно легко вычислить точную ячейку, на которую попадает позиция, либо разделив число на разрешение сетки и округлив вниз , либо, если вы используете разрешение сетки, равное 2 (например, 8,
    16, 32 и т.д.), вы можете использовать побитовые операторы. Следует отметить, что побитовые операции выполняются быстрее, и в приведенном ниже примере показаны оба метода.
   
  Синтаксис:
  mp_grid_add_cell(id, h, v);
  
    
      
        Аргумент
        Описание
      
      
        id
        Индекс mp_grid, который будет использоваться
      
      
        h
        Горизонтальное положение ячейки в сетке
      
      
        v
        Вертикальное положение ячейки в сетке
      
    
  
   
  Возвращается:
  Н/Д
   
  Пример:
  with (obj_Wall) {
     mp_grid_add_cell(grid, floor(x / 32), floor(y / 32)); }
     with (obj_Door) {
     mp_grid_add_cell(grid, x>>5, y>>5); }
  
  Приведенный выше код заставит все "obj_Wall" и все obj_Door добавить их эквивалентные позиции ячеек в mp_grid, индексированную в переменной "grid". В первой части примера это делается путем взятия координат x/y объекта
    и делением их на разрешение сетки (с использованием floor, чтобы значения оставались целыми), а во второй части (поскольку разрешение сетки равно степени 2) это делается путем битового сдвига координат x,y на 5 мест вправо.
   
   
   
  
    
      
        Назад: Планирование движения
        Далее: mp_grid_add_instances
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

