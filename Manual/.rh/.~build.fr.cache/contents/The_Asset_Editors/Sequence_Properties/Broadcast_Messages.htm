
  
  Широковещательные сообщения
  И последовательности, и спрайты могут генерировать так называемые широковещательные сообщения в любой точке своей длины. Эти
    сообщения - это простые строки, которые добавляются к определенным кадрам на временной шкале анимации, и когда эта точка временной шкалы будет достигнута, строка будет передана всем экземплярам, которые слушают ее. Любой экземпляр, имеющий событие Broadcast Message Event (находится в категории событий " Other"), получит строку сообщения, когда она будет достигнута на временной шкале, и тогда от вас зависит, какой код будет ее анализировать и реагировать соответствующим образом. Обратите внимание, что последовательности
    могут также прослушивать широковещательные сообщения, но для этого необходимо сначала настроить метод слушателя с помощью кода (см . 
    более подробную информацию).
  ПРИМЕЧАНИЕ: Установка image_index экземпляра непосредственно на кадр не вызовет никаких широковещательных сообщений, которые могут присутствовать на этом кадре спрайта объекта.
  Чтобы добавить широковещательное сообщение на временную шкалу последовательности или спрайта, достаточно нажать кнопку . Откроется диалоговое окно, в котором вы можете добавить сообщение
    для трансляции:
  
  После добавления сообщение будет показано в Листе допинга (или в представлении рамки спрайта). Чтобы отредактировать его, необходимо нажать правую кнопку мыши  на сообщении
    чтобы открыть список всех сообщений, которые перекрывают кадр (на кадре может быть только одно сообщение, но размещение нескольких сообщений на последовательных кадрах приведет к их визуальному перекрытию, что усложнит выбор нужного, и вы
    можно разместить сообщение и момент на одном кадре), а затем, выбрав одно из этого списка, откроется диалог сообщения, где
    вы можете отредактировать его или удалить.
  При срабатывании события Broadcast Message создается специальная карта DS Map, которая хранится во встроенной переменной event_data.
    Эта переменная ID является встроенной переменной глобальной области видимости, но будет содержать данные карты DS только в том событии, которое ее вызвало - в данном случае событие Broadcast Message - и будет возвращать -1 во всех остальных случаях. Ключи, которыми будет обладать событие, следующие
    следующие:
  
    "event_type": Для широковещательного сообщения это будет строка "sequence event" для сообщения, отправленного от последовательности и "sprite event"
      для сообщения, отправленного от спрайта.
    "message": Этот ключ содержит полученную строку сообщения.
    "element_id": Этот ключ возвращает идентификатор элемента (последовательности/спрайта/инстанса) на слое в редакторе помещений. Затем вы можете использовать это значение ID, чтобы узнать, какой элемент сгенерировал сообщение, используя функцию
      layer_get_element_type() и использовать другие соответствующие функции, чтобы нацелиться на него или выполнить
      действие, например, воспроизвести звук, в зависимости от необходимости.
  
  Обратите внимание, что событие широковещательного сообщения экземпляра будет получать несколько строк для каждого из случаев отправки широковещательного сообщения. Вам не обязательно действовать на все из них, и вы можете иметь разные экземпляры, прослушивающие разные строки широковещательных сообщений.
    Однако у вас может быть экземпляр, который прослушивает сообщения, которые могут быть получены одновременно. В этом случае событие будет срабатывать несколько раз - по одному разу для каждой строки сообщения.
  Ниже приведен краткий пример того, как можно проверить это событие:
  if event_data[? "event_type"] == "sequence event" {
     switch (event_data[? "message"]) { case "hit": audio_play_sound(snd_hit, 0, false); break; case "destroy": sequence_destroy(event_data[? "element_id"]); break; }  }
  
   
   
   
  
    
      
        Назад: Последовательности
        Следующий: Полотно последовательности
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

