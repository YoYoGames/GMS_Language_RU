
  
  Социальная
  Это событие может быть вызвано только обратными вызовамиразличных
    определенных социальных функций и UWP Xbox Live Functions и возвращает карту DS, хранящуюся в переменной async_load,
    содержащую различные пары ключ/значение в зависимости от обратного вызова функции, вызвавшей событие.
  Карта DS будет содержать ряд ключей, наиболее важным из которых является ключ "id". Он возвращает константу, которую затем можно проверить в коде, чтобы определить, какой из множества обратных вызовов получило событие.
    Разобрав этот ключ и сравнив возвращаемое значение с доступными константами, можно продолжить извлечение остальной информации из карты.
  На страницах функций Достижений и Лидербордов в разделе Справочники подробно описаны функции и обратные вызовы
    а также константы, используемые для запуска этого события, но есть также определенные обстоятельства, при которых оно будет запущено без вызова функции из запущенной игры:
  
    когда ваша игра запускается с панели управления ОС
    при выполнении задания
    когда другой игрок завершает задание
    когда игра запускается с приборной панели ОС путем выбора задачи
  
  Любой из вышеперечисленных обратных вызовов вызовет социальное событие, и будет создана карта async_load со следующими данными (обратите внимание, что для определения каждой причины события используется разное значение ключа "id").
    различных причин, по которым было вызвано событие, но все остальное содержимое карты одинаково):
  
    "id" - Значение этого ключа будет зависеть от типа обратного вызова, запускающего событие. это может быть одна из этих констант:
  
  
    
      
        Постоянная
        Описание
      
      
        achievement_challenge_received
        Получен вызов
      
      
        achievement_challenge_completed
        Задача выполнена.
      
      
        achievement_challenge_completed_by_remote
        Задача была решена другим игроком.
      
      
        achievement_challenge_launched
        Игра была запущена с приборной панели ОС с заданной задачей.
      
    
  
   
  
    "playerid" - Идентификатор игрока для вызова.
    "issuerid" - Идентификатор лица, выдавшего вызов.
    "state" - Состояние вызова, которое будет иметь значение от 0 до 3 (в виде строки) для недействительного, ожидающего, завершенного или отклоненного.
    "message" - Текстовое сообщение для вызова.
    "issueddate" - Дата выдачи вызова
    "completeddate" - Дата завершения вызова.
    "type" - Тип брошенного вызова. Может быть одной из двух констант:
  
  
    
      
        Постоянная
        Описание
      
      
        achievement_type_score_challenge
        Задача, основанная на значении очков.
      
      
        achievement_type_achievement_challenge
        Вызов, основанный на достижении.
      
    
  
   
  
    "identifier" - Идентифицирующая строка для вызова.
    "score" - Счет связан с задачей.
  
  Ниже приведен небольшой фрагмент кода в качестве примера использования:
  var ident = ds_map_find_value(async_load, "id" ); if ident == achievement_challenge_completed; { player_id = ds_map_find_value(async_load, "playerid"); issuer_id = ds_map_find_value(async_load, "issuerid");  state = ds_map_find_value(async_load, "state"); date_completed = ds_map_find_value(async_load, "completeddate"); date_issued = ds_map_find_value(async_load, "issueddate"); ach_type = ds_map_find_value(async_load,
    "type"); ach_ident = ds_map_find_value(async_load, "identifier"); ach_score = ds_map_find_value(async_load, "score"); }
  Информацию об этом событии в сочетании с целью UWP и функциями XBox Live можно найти на следующей странице:
  
    UWP и XBox Live - создание матчей
  
   
   
   
  
    
      
        Назад: Асинхронные события
        Следующий: Пар
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

