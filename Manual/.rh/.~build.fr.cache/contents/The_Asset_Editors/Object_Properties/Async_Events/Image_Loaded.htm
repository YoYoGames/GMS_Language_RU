
  
  Изображение загружено
  Это событие срабатывает при загрузке изображения в GameMaker Studio 2 либо на HTML5, либо через URL. Например, вы хотите загрузить изображение спрайта и только после его загрузки изменить текущий спрайт экземпляра на новый. В событии Create (или любом другом событии) можно написать примерно следующее:
  var _url = "http://www.angusgames.com/game/background1.png"; spr = sprite_add(_url, 0, false, false, 0, 0);
  Теперь начнется загрузка изображения на устройство или в браузер, но это не будет блокировать GameMaker Studio 2, пока она ожидает загрузки файла. Вместо этого GameMaker Studio 2 будет продолжать работать в обычном режиме, пока изображение не будет загружено и обратный вызов не вызовет событие Image Loaded Event, в котором будет создана карта DS Map и сохранена в специальной переменной
    async_load. Карта содержит следующую информацию:
  
    "filename": Полный путь к запрашиваемому файлу.
    "id": Идентификатор ресурса, который вы загрузили. Это будет то же самое, что и переменная, которой вы присвоили ресурс.
    "status": Возвращает значение меньше 0 в случае ошибки.
  
  Затем в этом событии можно присвоить вновь загруженное изображение спрайту. Следующий пример кода демонстрирует, как будет использоваться возвращаемая информация:
  если ds_map_find_value(async_load, "id") == spr {
     if ds_map_find_value(async_load, "status") >= 0 { sprite_index = spr; }  }
  
  Приведенный выше код сначала проверит id созданной карты DS, затем проверит status обратного вызова. Если значение больше или равно 0 (сигнализирует об успехе), результат из
    обратного вызова будет использован для установки индекса спрайта на только что загруженное изображение.
   
   
   
  
    
      
        Назад: Асинхронные события
        Следующее: Работа в сети
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

