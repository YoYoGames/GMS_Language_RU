
  
  Аудиозапись
  Это событие может быть вызвано только функцией audio_start_recording() функция
    и вернет DS Map, хранящуюся в переменной async_load,
    содержащую различные пары ключ/значение в зависимости от обратного вызова функции, вызвавшей событие.
  В карте ds_map будут доступны следующие ключи:
  
    "buffer_id" - идентификатор временного буфера, который можно использовать для получения аудиоданных
    "channel_index" - индекс канала записи, возвращенный вызывающей функцией, из которого поступили эти данные
    "data_len" - длина полученных данных (в байтах)
  
  ПРИМЕЧАНИЕ: Как упоминалось в начале этой страницы, переменная async_load действительна только в асинхронных событиях, поскольку карта DS, на которую она указывает, создается в начале события,
    затем снова удаляется в конце. Однако обратите внимание, что временный буфер, в котором хранится весь звук вместе с картой, также будет удален в конце события, поэтому вам следует скопировать его в пользовательский буфер, если вы хотите сохранить его для дальнейшего использования.
  В приведенном ниже примере использования мы создадим пользовательский буфер для хранения записанного звука, а также настроим нашу игру на запись с источника входного сигнала 0:
  channel_index = audio_start_recording(0); audio_buffer = buffer_create(len, buffer_fast, 1);
  Теперь каждый шаг игры при обнаружении записи будет вызывать асинхронное событие Audio Recording, в котором вы сможете работать с записанным входом примерно так:
  var channel = async_load[? "channel_index"]; if channel == channel_index { len = async_load[? "data_len"]; buffer_copy(async_load[? "buffer_id"], 0, len, audio_buffer, 0); }
  Здесь мы просто проверяем ключ "channel_index", чтобы убедиться, что он соответствует значению, возвращенному при начале записи, и если это так, то мы копируем содержимое временного буфера, созданного для этого события, в наш пользовательский буфер. После этого вы можете
    делать с пользовательским буфером все, что захотите - вы можете воспроизвести его с помощью специальных аудиофункций буфера, вы можете обработать его и отправить по сети, вы можете сохранить его на диск... После того, как у вас есть записанный звук в буфере, вы можете делать практически
    что угодно.
   
   
   
  
    
      
        Назад: Асинхронные события
        Следующий: Облако
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

