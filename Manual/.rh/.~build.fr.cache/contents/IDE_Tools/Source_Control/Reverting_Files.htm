
  
  Реверсирование файлов
  В предыдущих разделах вы видели, как создавать репозиторий и фиксировать в нем данные, но что произойдет, если вы допустите ошибку и захотите "откатиться" к предыдущему
    фиксацию? Давайте сделаем преднамеренную ошибку и посмотрим, как с ней справиться...
  Прежде всего, создайте новый ресурс - в этом примере мы создадим ресурс Script - и изначально вы не увидите значка состояния, поскольку, насколько известно из системы управления источниками, он еще не существует. В ресурс сценария добавьте простую строку
    кода, например:
  show_debug_message("Hello World");
  Если теперь вы закроете редактор кода, сценарий будет сохранен, и в браузере активов рядом с ним появится значок измененного файла .
    Теперь откройте окно Commit , и вы увидите, что изменения происходят в четыре этапа, поскольку новые ресурсы добавляются автоматически:
  Изменения будут поэтапными:
  
    файл проекта .yyp 
    файл представления
    сам сценарий GML 
    файл .yy, ссылающийся на него
  
  Вы должны ввести сообщение о фиксации, а затем нажать кнопку Commit , как мы объясняли ранее. Теперь вернемся к нашему сценарию и изменим строку кода на (например):
  show_debug_message("Hello World, how are you?");
  Когда мы закроем редактор кода, рядом со скриптом снова появится красный значок , но мы поняли, что допустили ошибку в нашем коде и хотим
    откатиться к предыдущей версии, чтобы исправить ее (конечно, можно было бы просто открыть скрипт и легко исправить его, поскольку пример очень прост, но в больших проектах такой подход обычно нецелесообразен). Что нам нужно сделать, так это вернуть наши
    изменения.
  Чтобы отменить изменение, нам сначала нужно снова открыть окно фиксации, поэтому мы снова переходим в Source Control > Commit Changes. Наш измененный файл снова будет помещен в стек, готовый к фиксации, но это не то, что нам нужно.
    Поэтому мы нажмем кнопку Unstage All, чтобы убрать его из области постановки.
  Если мы теперь щелкнем правой кнопкой мыши  на файле, который мы изменили, мы получим контекстное меню с опцией "Вернуть путь":
  При выборе этой опции вы вернете файлы в предыдущее состояние, в котором они находились.
  ВАЖНО! При реверсировании вы получите сообщение с просьбой перезагрузить или сохранить текущий проект, так как программа проверки файлов обнаружила изменения на диске:
    Вы должны нажать Reload, а не save, так как сохранение сохранит то, что находится в памяти, а не перезагрузит реверсированные файлы.
  Это все замечательно для тех случаев, когда вы что-то редактируете и хотите внести изменения, не выполняя фиксацию, но как быть, если вы зафиксировали одно или несколько изменений и хотите откатиться к предыдущей фиксации? Что ж, давайте отредактируем
    наш сценарий еще раз, чтобы сказать:
  show_debug_message("Это плохая идея");
  Теперь мы зафиксируем его, как и раньше, чтобы он попал под контроль исходного кода. Итак, это была плохая идея, и мы хотим сделать откат, а значит, для начала нам нужно открыть окно Source Control > View History. Здесь мы увидим
    список всех предыдущих коммитов в этом окне, начиная с начального коммита, коммита для скрипта, а затем коммита для скрипта, который мы отредактировали как "плохую идею":
  Теперь у нас есть два варианта. Мы можем вернуть всю ревизию - что приведет к возврату всех файлов, которые были изменены, к файлам выбранного коммита.
    или мы можем изменить путь - что приведет к изменению только одного файла. Для начала давайте сделаем первый вариант:
  
    Щелкните правой кнопкой мыши  на нашей второй фиксации в панели Commit History (фиксация "Hello World").
    Выберите Revert To This Revision и затем выберите ReLoad в предупреждающем сообщении.
  
  Вы должны увидеть, что сценарий теперь имеет красный значок состояния , и если мы откроем его, то получим следующее:
  Затем мы можем выполнить фиксацию проекта, и мы снова окажемся на прежнем месте. Однако мы также можем отменить это действие
    для файла и вернуть нашу "плохую идею", сделав следующее:
  
    Откройте окно Commit Changes.
    Снимите с экрана сценарий с кодом "Hello World".
    Щелкните правой кнопкой мыши  и " Вернуть путь".
  
  Теперь мы снова имеем ошибочный файл в проекте! Что ж, мы можем воспользоваться этой возможностью и изменить путь только к этому файлу, а не возвращать все к предыдущей ревизии. Для этого нам нужно сделать следующее:
  
    Откройте окно История просмотров.
    Щелкните на второй фиксации (фиксация "Hello World").
    Щелкните правой кнопкой мыши  на нашем сценарии GML в панели Files и выберите Revert Path.
  
  У нас снова должен быть код "Hello World", и мы можем сделать свежий коммит, чтобы обновить контроль исходного кода с исправленным файлом.
   
   
   
  
    
      
        Назад: Контроль источников
        Следующее: Клонирование хранилища 
      
    
    © Copyright YoYo Games Ltd. 2021 Все права защищены
  
  
  

